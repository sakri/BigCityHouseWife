!function(a){var b=function(){};b.PI_180=Math.PI/180,b.ONE80_PI=180/Math.PI,b.PI2=2*Math.PI,b.HALF_PI=Math.PI/2,b.NEGATIVE_HALF_PI=-Math.PI/2,b.clamp=function(a,b,c){return a>c?a:c>b?b:c},b.clampRGB=function(a){return b.clamp(0,255,a)},b.normalize=function(a,b,c){return(a-b)/(c-b)},b.interpolate=function(a,b,c){return b+(c-b)*a},b.map=function(a,c,d,e,f){return b.interpolate(b.normalize(a,c,d),e,f)},b.constrainDegreeTo360=function(a){return(360+a%360)%360},b.constrainRadianTo2PI=function(a){return(b.PI2+a%b.PI2)%b.PI2},b.radiansToDegrees=function(a){return a*b.ONE80_PI},b.degreesToRadians=function(a){return a*b.PI_180},b.getRandomNumberInRange=function(a,b){return a+Math.random()*(b-a)},b.getRandomIntegerInRange=function(a,c){return Math.round(b.getRandomNumberInRange(a,c))},b.getCircumferenceOfEllipse=function(a,b){return 2*Math.sqrt(.5*(a*a+b*b))*Math.PI/2},a.BCHWMathUtil=b}(window),function(a){var b=function(){};b.Point=function(a,b){this.x=isNaN(a)?0:a,this.y=isNaN(b)?0:b},b.Point.prototype.clone=function(){return new b.Point(this.x,this.y)},b.Point.prototype.equals=function(a){return this.x==a.x&&this.y==a.y},b.Point.prototype.toString=function(){return"{x:"+this.x+" , y:"+this.y+"}"},b.distanceBetweenTwoPoints=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},b.angleBetweenTwoPoints=function(a,b){return Math.atan2(a.y-b.y,a.x-b.x)},b.mirrorPointInRectangle=function(a,c){return new b.Point(c.width-a.x,c.height-a.y)},b.randomizePoint=function(a,c){return new b.Point(-c+Math.random()*c+a.x,-c+Math.random()*c+a.y)},b.Triangle=function(a,c,d){this.a=a?a:new b.Point(0,0),this.b=c?c:new b.Point(0,0),this.c=d?d:new b.Point(0,0)},b.Triangle.prototype.equals=function(a){return this.a.equals(a.a)&&this.b.equals(a.b)&&this.c.equals(a.c)},b.Triangle.prototype.clone=function(){return new b.Triangle(new b.Point(this.a.x,this.a.y),new b.Point(this.b.x,this.b.y),new b.Point(this.c.x,this.c.y))},b.Triangle.prototype.getSmallestX=function(){return Math.min(this.a.x,this.b.x,this.c.x)},b.Triangle.prototype.getSmallestY=function(){return Math.min(this.a.y,this.b.y,this.c.y)},b.Triangle.prototype.getBiggestX=function(){return Math.max(this.a.x,this.b.x,this.c.x)},b.Triangle.prototype.getBiggestY=function(){return Math.max(this.a.y,this.b.y,this.c.y)},b.Triangle.prototype.containsVertex=function(a){return this.a.x==a.x&&this.a.y==a.y||this.b.x==a.x&&this.b.y==a.y||this.c.x==a.x&&this.c.y==a.y},b.Triangle.prototype.toString=function(){return"toString() Triangle{a:"+this.a+" , b:"+this.b+" , c:"+this.c+"}"},b.Triangle.prototype.containsVertex=function(a){return this.a.x==a.x&&this.a.y==a.y||this.b.x==a.x&&this.b.y==a.y||this.c.x==a.x&&this.c.y==a.y},b.Triangle.prototype.sharesEdge=function(a){var b=0;return this.containsVertex(a.a)&&b++,this.containsVertex(a.b)&&b++,this.containsVertex(a.c)&&b++,2==b},b.Rectangle=function(a,b,c,d){this.update(a,b,c,d)},b.Rectangle.prototype.update=function(a,b,c,d){this.x=isNaN(a)?0:a,this.y=isNaN(b)?0:b,this.width=isNaN(c)?0:c,this.height=isNaN(d)?0:d},b.Rectangle.prototype.updateToRect=function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},b.Rectangle.prototype.scaleX=function(a){this.width*=a},b.Rectangle.prototype.scaleY=function(a){this.height*=a},b.Rectangle.prototype.scale=function(a){this.scaleX(a),this.scaleY(a)},b.Rectangle.prototype.getRight=function(){return this.x+this.width},b.Rectangle.prototype.getBottom=function(){return this.y+this.height},b.Rectangle.prototype.getCenterX=function(){return this.x+this.width/2},b.Rectangle.prototype.containsPoint=function(a,b){return a>=this.x&&b>=this.y&&a<=this.getRight()&&b<=this.getBottom()},b.Rectangle.prototype.containsRect=function(a){return this.containsPoint(a.x,a.y)&&this.containsPoint(a.getRight(),a.getBottom())},b.Rectangle.prototype.getCenter=function(){return new b.Point(this.x+this.width/2,this.y+this.height/2)},b.Rectangle.prototype.getCenterY=function(){return this.y+this.height/2},b.Rectangle.prototype.isSquare=function(){return this.width==this.height},b.Rectangle.prototype.isLandscape=function(){return this.width>this.height},b.Rectangle.prototype.isPortrait=function(){return this.width<this.height},b.Rectangle.prototype.getSmallerSide=function(){return Math.min(this.width,this.height)},b.Rectangle.prototype.getBiggerSide=function(){return Math.max(this.width,this.height)},b.Rectangle.prototype.getArea=function(){return this.width*this.height},b.Rectangle.prototype.floor=function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},b.Rectangle.prototype.ceil=function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},b.Rectangle.prototype.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height)},b.Rectangle.prototype.roundIn=function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},b.Rectangle.prototype.roundOut=function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},b.Rectangle.prototype.clone=function(){return new b.Rectangle(this.x,this.y,this.width,this.height)},b.Rectangle.prototype.toString=function(){return"Rectangle{x:"+this.x+" , y:"+this.y+" , width:"+this.width+" , height:"+this.height+"}"},b.RoundedRectangle=function(a,c,d,e,f){b.Rectangle.call(this,a,c,d,e),this.radius=isNaN(f)?5:f},b.RoundedRectangle.prototype=Object.create(b.Rectangle.prototype),b.RoundedRectangle.prototype.constructor=b.Rectangle,b.RoundedRectangle.prototype.drawPathToContext=function(a){a.beginPath(),a.moveTo(this.x,this.y+this.radius),a.arc(this.x+this.radius,this.y+this.radius,this.radius,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),a.lineTo(this.getRight()-this.radius,this.y),a.arc(this.getRight()-this.radius,this.y+this.radius,this.radius,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),a.lineTo(this.getRight(),this.getBottom()-this.radius),a.arc(this.getRight()-this.radius,this.getBottom()-this.radius,this.radius,0,BCHWMathUtil.HALF_PI),a.lineTo(this.x+this.radius,this.getBottom()),a.arc(this.x+this.radius,this.getBottom()-this.radius,this.radius,BCHWMathUtil.HALF_PI,Math.PI),a.lineTo(this.x,this.y+this.radius),a.closePath()},b.RoundedRectangle.prototype.toString=function(){return"RoundedRectangle{x:"+this.x+" , y:"+this.y+" , width:"+this.width+" , height:"+this.height+" , radius:"+this.radius+"}"},b.RoundedRectangle.prototype.clone=function(){return new b.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},b.RectangleUtil=function(){},b.RectangleUtil.getBiggerRectangle=function(a,b){return a.getArea()>b.getArea()?a:b},b.RectangleUtil.getSmallerRectangle=function(a,b){return a.getArea()<b.getArea()?a:b},b.RectangleUtil.isBiggerThan=function(a,b){return a.getArea()>b.getArea()},b.RectangleUtil.isBiggerThanOrEqual=function(a,b){return a.getArea()>=b.getArea()},b.RectangleUtil.isSmallerThan=function(a,b){return a.getArea()<b.getArea()},b.RectangleUtil.isSmallerThanOrEqual=function(a,b){return a.getArea()<=b.getArea()},b.RectangleUtil.isEqual=function(a,c){return b.RectangleUtil.hasEqualPosition(a,c)&&b.RectangleUtil.hasEqualSides(a,c)},b.RectangleUtil.hasEqualPosition=function(a,b){return a.x==b.x&&a.y==b.y},b.RectangleUtil.hasEqualSides=function(a,b){return a.width==b.width&&a.height==b.height},b.RectangleUtil.hasEqualArea=function(a,b){return a.getArea()==b.getArea()},b.RectangleUtil.getCenterX=function(a){return a.x+a.width/2},b.RectangleUtil.getCenterY=function(a){return a.y+a.height/2},b.RectangleUtil.createRandomXIn=function(a){return BCHWMathUtil.getRandomNumberInRange(a.x,a.getRight())},b.RectangleUtil.createRandomYIn=function(a){return BCHWMathUtil.getRandomNumberInRange(a.y,a.getBottom())},b.RectangleUtil.rectanglesIntersect=function(a,b){return a.containsPoint(b.x,b.y)||a.containsPoint(b.getRight(),b.y)||a.containsPoint(b.getRight(),b.getBottom())||a.containsPoint(b.x,b.getBottom())},b.RectangleUtil.getIntersectingRectangle=function(a,c){if(!b.RectangleUtil.rectanglesIntersect(a,c))return console.log("	no intersection found"),null;if(a.containsRect(c))return c;if(c.containsRect(a))return a;var d=Math.max(a.x,c.x),e=Math.max(a.y,c.y),f=Math.min(a.getRight(),c.getRight()),g=Math.min(a.getBottom(),c.getBottom());return new b.Rectangle(d,e,f-d,g-e)},b.RectangleUtil.createRandomRectangleIn=function(a){var c=Math.random()*a.width,d=Math.random()*a.height,e=Math.random()*(a.width-c),f=Math.random()*(a.height-d);return new b.Rectangle(a.x+e,a.y+f,c,d)},b.RectangleUtil.createRandomIntegerRectangleIn=function(a){var c=b.RectangleUtil.createRandomRectangleIn(a);return c.round(),c},b.RectangleUtil.horizontalAlignLeft=function(a,b){b.x=a.x},b.RectangleUtil.horizontalAlignMiddle=function(a,c){c.x=b.RectangleUtil.getCenterX(a)-c.width/2},b.RectangleUtil.horizontalAlignRight=function(a,b){b.x=a.getRight()-b.width},b.RectangleUtil.verticalAlignTop=function(a,b){b.y=a.y},b.RectangleUtil.verticalAlignMiddle=function(a,c){c.y=b.RectangleUtil.getCenterY(a)-c.height/2},b.RectangleUtil.verticalAlignBottom=function(a,b){b.y=a.getBottom()-b.height},b.RectangleUtil.scaleRectToPortraitFit=function(a,c){b.RectangleUtil.scaleRectToHeight(c,a.height)},b.RectangleUtil.scaleRectToLandscapeFit=function(a,c){b.RectangleUtil.scaleRectToWidth(c,a.width)},b.RectangleUtil.scaleRectToHeight=function(a,b){a.width*=b/a.height,a.height=b},b.RectangleUtil.scaleRectToWidth=function(a,b){a.height*=b/a.width,a.width=b},b.RectangleUtil.scaleRectToBestFit=function(a,c){var d=c.clone();b.RectangleUtil.scaleRectToPortraitFit(a,d),d.width>a.width?b.RectangleUtil.scaleRectToLandscapeFit(a,c):c.updateToRect(d)},b.RectangleUtil.scaleRectInto=function(a,c){b.RectangleUtil.scaleRectToBestFit(a,c),b.RectangleUtil.verticalAlignMiddle(a,c),b.RectangleUtil.horizontalAlignMiddle(a,c)},b.setIdentityMatrixToContext=function(a){a.setTransform(1,0,0,1,0,0)},b.Transform=function(a,b,c,d,e,f){this.update(isNaN(a)?1:a,isNaN(b)?0:b,isNaN(c)?0:c,isNaN(d)?1:d,isNaN(e)?0:e,isNaN(f)?0:f)},b.Transform.prototype.update=function(a,b,c,d,e,f){this.scaleX=a,this.skewX=b,this.skewY=c,this.scaleY=d,this.tx=e,this.ty=f},b.Transform.prototype.toString=function(){return"SimpleGeometry.Transform{scaleX:"+this.scaleX+" ,skewX:"+this.skewX+" ,skewY:"+this.skewY+" ,scaleY:"+this.scaleY+" ,tx:"+this.tx+" ,ty:"+this.ty+"}"},a.BCHWGeom=b}(window),function(a){UnitAnimator=function(a,b,c,d){this.easingFunction=UnitAnimator.easeLinear,this.reset(a,b,c,d)},UnitAnimator.easeLinear=function(a,b,c,d){return c*(a/d)+b},UnitAnimator.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*BCHWMathUtil.HALF_PI)+c+b},UnitAnimator.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*BCHWMathUtil.HALF_PI)+b},UnitAnimator.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},UnitAnimator.easeInBounce=function(a,b,c,d){return c-UnitAnimator.easeOutBounce(d-a,0,c,d)+b},UnitAnimator.easeOutBounce=function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},UnitAnimator.easeInOutBounce=function(a,b,c,d){return d/2>a?.5*UnitAnimator.easeInBounce(2*a,0,c,d)+b:.5*UnitAnimator.easeOutBounce(2*a-d,0,c,d)+.5*c+b},UnitAnimator.easeInElastic=function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f))+b)},UnitAnimator.easeOutElastic=function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)+c+b)},UnitAnimator.easeInOutElastic=function(a,b,c,d,e,f){var g;return 0==a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)*.5+c+b)},UnitAnimator.easingFunctions=[UnitAnimator.easeLinear,UnitAnimator.easeInSine,UnitAnimator.easeOutSine,UnitAnimator.easeInOutSine,UnitAnimator.easeInBounce,UnitAnimator.easeOutBounce,UnitAnimator.easeInOutBounce,UnitAnimator.easeInElastic,UnitAnimator.easeOutElastic,UnitAnimator.easeInOutElastic],UnitAnimator.getRandomEasingFunction=function(){return UnitAnimator.easingFunctions[Math.floor(Math.random()*UnitAnimator.easingFunctions.length)]},UnitAnimator.prototype.setRandomEasingFunction=function(){this.easingFunction=UnitAnimator.getRandomEasingFunction()},UnitAnimator.prototype.setEasingFunction=function(a){UnitAnimator.easingFunctions.indexOf(a)>-1&&(this.easingFunction=a)},UnitAnimator.prototype.getAnimationPercent=function(){return this.easingFunction(BCHWMathUtil.normalize(this.millisecondsAnimated,0,this.duration),0,1,1)},UnitAnimator.prototype.isAnimating=function(){return!isNaN(this.intervalId)},UnitAnimator.prototype.reset=function(a,b,c,d){this.duration=a,this.framerate=b,this.updateCallBack=c,this.completeCallBack=d,this.millisecondsAnimated=0},UnitAnimator.prototype.start=function(a){a&&this.setEasingFunction(a);var b=this;this.intervalId=setInterval(function(){b.update()},this.framerate)},UnitAnimator.prototype.pause=function(){isNaN(this.intervalId)||clearInterval(this.intervalId),delete this.intervalId},UnitAnimator.prototype.update=function(){return this.millisecondsAnimated+=this.framerate,this.millisecondsAnimated>=this.duration?(this.pause(),this.millisecondsAnimated=this.duration,this.dispatchUpdate(),this.dispatchComplete(),void 0):(this.dispatchUpdate(),void 0)},UnitAnimator.prototype.dispatchUpdate=function(){this.updateCallBack&&this.updateCallBack()},UnitAnimator.prototype.dispatchComplete=function(){this.completeCallBack&&this.completeCallBack()},a.UnitAnimator=UnitAnimator}(window),function(a){var b=function(){};b.shuffle=function(a){for(var b=[];a.length>0;){var c=a.splice(Math.floor(Math.random()*a.length),1);b.push(c[0])}return b},b.createSequentialNumericArray=function(a){for(var b=[],c=0;a>c;c++)b[c]=c;return b},a.BCHWArrayUtil=b}(window),function(a){var b=function(){};b.prototype.loadImages=function(a,b,c){this.urls=a,this.completeCallback=b,this.updateCallback=void 0!=c?c:void 0,this.images=[],this.currentLoadIndex=0,this.loadNextImage()},b.prototype.stop=function(){this.completeCallback=void 0,this.updateCallback=void 0,this.urls=[]},b.prototype.getProgressPercent=function(){return BCHWMathUtil.normalize(this.currentLoadIndex,0,this.urls.length)},b.prototype.getProgressString=function(){return this.currentLoadIndex+" / "+this.urls.length},b.prototype.loadNextImage=function(){if(this.currentLoadIndex>=this.urls.length)return this.completeCallback(),void 0;var a=new Image,b=this;a.onload=function(){b.imageLoadComplete()};var c=this.urls[this.currentLoadIndex];console.log("BCHWImageStore.loadNextImage()",c),a.onerror=function(){alert("BCHWImageStore ERROR : "+c+" could not be loaded.")},a.src=this.urls[this.currentLoadIndex],this.images.push(a),this.currentLoadIndex++},b.prototype.imageLoadComplete=function(){for(var a=0;a<this.images.length;a++)this.images[a].onload=void 0;void 0!=this.updateCallback&&this.updateCallback(),this.loadNextImage()},a.BCHWImageStore=b}(window),function(a){var b=function(){};b.RGBAColor=function(){this.red=0,this.green=0,this.blue=0,this.alpha=1},b.RGBAColor.prototype.toString=function(){return"RGBAColor{red:"+this.red+" , green:"+this.green+" , blue:"+this.blue+" , alpha:"+this.alpha+"}"},b.RGBAColor.prototype.getCanvasColorString=function(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},b.createRGBAColor=function(a,c,d,e){var f=new b.RGBAColor;return isNaN(a)||(f.red=BCHWMathUtil.clampRGB(a)),isNaN(c)||(f.green=BCHWMathUtil.clampRGB(c)),isNaN(d)||(f.blue=BCHWMathUtil.clampRGB(d)),isNaN(e)||(f.alpha=BCHWMathUtil.clamp(0,1,e)),f},b.BCHWColorsLib=function(){},b.BCHWColorsLib.ORANGE=b.createRGBAColor(246,160,37),b.BCHWColorsLib.GREEN=b.createRGBAColor(65,161,113),b.BCHWColorsLib.RED=b.createRGBAColor(157,11,14),b.BCHWColorsLib.PURPLE=b.createRGBAColor(217,135,139),b.BCHWColorsLib.TURQUOISE=b.createRGBAColor(116,193,178),b.BCHWColorsLib.LIGHT_BROWN=b.createRGBAColor(173,134,70),b.BCHWColorsLib.DARK_BROWN=b.createRGBAColor(91,62,0),b.BCHWColorsLib.BLACK=b.createRGBAColor(51,51,51),b.BCHWColorsLib.WHITE=b.createRGBAColor(255,255,255),b.BCHWColorsLib.DARK_GRAY=b.createRGBAColor(102,102,102),b.BCHWColorsLib.LIGHT_GRAY=b.createRGBAColor(219,203,191),b.BCHWColorsLib.fillPalette=[b.BCHWColorsLib.ORANGE,b.BCHWColorsLib.GREEN,b.BCHWColorsLib.RED,b.BCHWColorsLib.PURPLE],b.BCHWColorsLib.getRandomFillPaletteColor=function(){return b.BCHWColorsLib.fillPalette[Math.floor(Math.random()*b.BCHWColorsLib.fillPalette.length)]},b.BCHWColorsLib.getRandomFillPaletteColorString=function(){var a=b.BCHWColorsLib.fillPalette[Math.floor(Math.random()*b.BCHWColorsLib.fillPalette.length)];return a.getCanvasColorString()},b.BCHWColorsLib.getNextColor=function(a){var c=b.BCHWColorsLib.getRandomFillPaletteColor();return a==c?b.BCHWColorsLib.getNextColor(a):c},b.BCHWColorsLib.getNextColorString=function(a){var c=b.BCHWColorsLib.getNextColor(a);return c.getCanvasColorString()},a.BCHWColor=b}(window),function(a){var b=function(a,b,c,d){this.topLeft=new BCHWGeom.Point,this.topRight=new BCHWGeom.Point,this.bottomRight=new BCHWGeom.Point,this.bottomLeft=new BCHWGeom.Point,a&&this.updatePoints(a,b,c,d),this.triangleA=new BCHWGeom.Triangle(this.topLeft,this.topRight,this.bottomLeft),this.triangleB=new BCHWGeom.Triangle(this.bottomRight,this.bottomLeft,this.topRight),this.transform=new BCHWGeom.Transform,this.imageTriangle=new BCHWGeom.Triangle};b.prototype.updatePoints=function(a,b,c,d){this.topLeft.x=a.x,this.topLeft.y=a.y,this.topRight.x=b.x,this.topRight.y=b.y,this.bottomRight.x=c.x,this.bottomRight.y=c.y,this.bottomLeft.x=d.x,this.bottomLeft.y=d.y},b.prototype.updatePointsToTransformRectangle=function(a){this.updatePoints(a.topLeft,a.topRight,a.bottomRight,a.bottomLeft)},b.prototype.clone=function(){return new b(new BCHWGeom.Point(this.topLeft.x,this.topLeft.y),new BCHWGeom.Point(this.topRight.x,this.topRight.y),new BCHWGeom.Point(this.bottomRight.x,this.bottomRight.y),new BCHWGeom.Point(this.bottomLeft.x,this.bottomLeft.y))},b.prototype.render=function(a,b){b&&this.renderImage(a,b)},b.prototype.renderImage=function(a,b){BCHWGeom.setIdentityMatrixToContext(a),a.fillStyle=a.createPattern(b,"no-repeat"),this.imageTriangle.a.x=this.imageTriangle.a.y=this.imageTriangle.b.y=this.imageTriangle.c.x=0,this.imageTriangle.b.x=b.width,this.imageTriangle.c.y=b.height,this.updateTriangleTransform(this.imageTriangle,this.triangleA),this.transform.tx=this.triangleA.a.x,this.transform.ty=this.triangleA.a.y,a.setTransform(this.transform.scaleX,this.transform.skewX,this.transform.skewY,this.transform.scaleY,this.transform.tx,this.transform.ty),a.beginPath(),a.moveTo(0,0),a.lineTo(b.width,0),a.lineTo(0,b.height),a.moveTo(0,0),a.fill(),a.closePath(),BCHWGeom.setIdentityMatrixToContext(a),this.imageTriangle.b.x=this.imageTriangle.c.y=0,this.imageTriangle.a.x=this.imageTriangle.c.x=b.width,this.imageTriangle.a.y=b.height,this.imageTriangle.b.y=b.height,this.updateTriangleTransform(this.imageTriangle,this.triangleB),this.transform.ty=this.triangleA.a.y+2*(this.triangleA.b.y-this.triangleA.a.y),a.setTransform(this.transform.scaleX,this.transform.skewX,this.transform.skewY,this.transform.scaleY,this.transform.tx,this.transform.ty),a.beginPath(),a.moveTo(b.width,b.height),a.lineTo(0,b.height),a.lineTo(0,b.height-1),a.lineTo(b.width-1,0),a.lineTo(b.width,0),a.lineTo(b.width,b.height),a.fill(),a.closePath(),BCHWGeom.setIdentityMatrixToContext(a)},b.prototype.updateTriangleTransform=function(a,b){var c=BCHWGeom.angleBetweenTwoPoints(b.b,b.a),d=BCHWGeom.angleBetweenTwoPoints(b.c,b.a),e=BCHWGeom.distanceBetweenTwoPoints(b.a,b.b),f=BCHWGeom.distanceBetweenTwoPoints(b.a,b.c),g=e/(a.b.x-a.a.x),h=f/(a.c.y-a.a.y);this.transform.scaleX=Math.cos(c)*g,this.transform.scaleY=Math.sin(d)*h,this.transform.skewX=Math.sin(c)*g,this.transform.skewY=Math.cos(d)*h},b.prototype.renderOutline=function(a){a.strokeStyle="#FF0000",a.lineWidth=1,a.beginPath(),a.moveTo(this.triangleA.a.x,this.triangleA.a.y),a.lineTo(this.triangleA.b.x,this.triangleA.b.y),a.lineTo(this.triangleA.c.x,this.triangleA.c.y),a.lineTo(this.triangleA.a.x,this.triangleA.a.y),a.stroke(),a.closePath(),a.beginPath(),a.moveTo(this.triangleB.a.x,this.triangleB.a.y),a.lineTo(this.triangleB.b.x,this.triangleB.b.y),a.lineTo(this.triangleB.c.x,this.triangleB.c.y),a.lineTo(this.triangleB.a.x,this.triangleB.a.y),a.stroke(),a.closePath()},a.TransformRectangle=b}(window),function(a){var b=function(a,b){this.flipDuration=isNaN(a)?500:a,this.flipFramerate=isNaN(b)?20:b,this.unitAnimator=new UnitAnimator,this.transformRectangle=new TransformRectangle,this.simpleRect=new BCHWGeom.Rectangle};b.useGradient=!1,b.useSimpleFlip=!1,b.prototype.flip=function(a,b,c,d,e,f,g){this.flipRect=a,this.context=b,this.image1=c,this.image2=d,this.updateCallback=e,this.completeCallback=f,this.autoClear=g;var h=this;this.unitAnimator.reset(this.flipDuration,this.flipFramerate,function(){h.flipUpdateHandler()},function(){h.flipCompleteHandler()}),this.unitAnimator.start()},b.prototype.flipUpdateHandler=function(){var a=this.unitAnimator.getAnimationPercent();switch(this.updateCallback&&this.updateCallback(),this.autoClear&&this.context.clearRect(this.flipRect.x,this.flipRect.y,this.flipRect.width,this.flipRect.height),a){case.5:return this.drawHalfwayLine(),void 0;case 0:return this.drawImage(this.image1),void 0;case 1:return this.drawImage(this.image2),void 0}b.useSimpleFlip?.5>a?this.updateFlipFirstHalfSimple(a):this.updateFlipSecondHalfSimple(a):.5>a?this.updateFlipFirstHalf(a):this.updateFlipSecondHalf(a)},b.prototype.drawImage=function(a){this.context.drawImage(a,this.flipRect.x,this.flipRect.y,this.flipRect.width,this.flipRect.height)},b.prototype.drawHalfwayLine=function(){this.context.lineWidth=2,this.context.strokeStyle="rgba(0,0,0,.5)",this.context.beginPath(),this.context.moveTo(this.flipRect.getCenterX(),this.flipRect.y+.25*this.flipRect.height),this.context.lineTo(this.flipRect.getCenterX(),this.flipRect.y+.75*this.flipRect.height),this.context.stroke()},b.prototype.updateFlipFirstHalf=function(a){this.transformRectangle.topLeft.y=this.flipRect.y,this.transformRectangle.bottomLeft.y=this.flipRect.getBottom(),this.transformRectangle.topLeft.x=this.transformRectangle.bottomLeft.x=this.flipRect.x+this.flipRect.width*a,this.transformRectangle.topRight.x=this.transformRectangle.bottomRight.x=this.flipRect.getRight()-(this.transformRectangle.topLeft.x-this.flipRect.x);var c=this.flipRect.height/2*a;this.transformRectangle.topRight.y=this.flipRect.y+c,this.transformRectangle.bottomRight.y=this.transformRectangle.bottomLeft.y-c,this.transformRectangle.renderImage(this.context,this.image1),b.useGradient&&(this.gradient=this.context.createLinearGradient(this.transformRectangle.topRight.x,this.transformRectangle.topLeft.y,this.transformRectangle.topLeft.x,this.transformRectangle.topLeft.y),this.drawGradient(this.getGradientAlphaForPercent(a)))},b.prototype.updateFlipSecondHalf=function(a){this.transformRectangle.topRight.y=this.flipRect.y,this.transformRectangle.bottomRight.y=this.flipRect.getBottom(),this.transformRectangle.topRight.x=this.transformRectangle.bottomRight.x=this.flipRect.x+this.flipRect.width*a,this.transformRectangle.topLeft.x=this.transformRectangle.bottomLeft.x=this.flipRect.x+(this.flipRect.getRight()-this.transformRectangle.topRight.x);var c=this.flipRect.height/2*(1-a);this.transformRectangle.topLeft.y=this.flipRect.y+c,this.transformRectangle.bottomLeft.y=this.transformRectangle.bottomRight.y-c,this.transformRectangle.renderImage(this.context,this.image2),b.useGradient&&(this.gradient=this.context.createLinearGradient(this.transformRectangle.topLeft.x,this.transformRectangle.topLeft.y,this.transformRectangle.topRight.x,this.transformRectangle.topLeft.y),this.drawGradient(this.getGradientAlphaForPercent(a)))},b.prototype.updateFlipFirstHalfSimple=function(a){var c=this.flipRect.width*a;this.simpleRect.update(this.flipRect.x+c,this.flipRect.y,this.flipRect.width-2*c,this.flipRect.height),this.context.drawImage(this.image1,this.simpleRect.x,this.simpleRect.y,this.simpleRect.width,this.simpleRect.height),b.useGradient&&(this.gradient=this.context.createLinearGradient(this.simpleRect.getRight(),this.simpleRect.y,this.simpleRect.x,this.simpleRect.y),this.drawGradientSimple(this.getGradientAlphaForPercent(a)))},b.prototype.updateFlipSecondHalfSimple=function(a){var c=this.flipRect.width-this.flipRect.width*a;this.simpleRect.update(this.flipRect.x+c,this.flipRect.y,this.flipRect.width-2*c,this.flipRect.height),this.context.drawImage(this.image2,this.simpleRect.x,this.simpleRect.y,this.simpleRect.width,this.simpleRect.height),b.useGradient&&(this.gradient=this.context.createLinearGradient(this.simpleRect.x,this.simpleRect.y,this.simpleRect.getRight(),this.simpleRect.y),this.drawGradientSimple(this.getGradientAlphaForPercent(a)))},b.prototype.getGradientAlphaForPercent=function(a){return.5-Math.abs(.5-a)},b.prototype.drawGradient=function(a){.1>a||(this.gradient.addColorStop(0,"rgba(0,0,0,"+a+")"),this.gradient.addColorStop(1,"rgba(0,0,0,0)"),this.context.fillStyle=this.gradient,this.context.beginPath(),this.context.moveTo(this.transformRectangle.topLeft.x,this.transformRectangle.topLeft.y),this.context.lineTo(this.transformRectangle.topRight.x,this.transformRectangle.topRight.y),this.context.lineTo(this.transformRectangle.bottomRight.x,this.transformRectangle.bottomRight.y),this.context.lineTo(this.transformRectangle.bottomLeft.x,this.transformRectangle.bottomLeft.y),this.context.closePath(),this.context.fill())},b.prototype.drawGradientSimple=function(a){.1>a||(this.gradient.addColorStop(0,"rgba(0,0,0,"+a+")"),this.gradient.addColorStop(1,"rgba(0,0,0,0)"),this.context.fillStyle=this.gradient,this.context.closePath(),this.context.fillRect(this.simpleRect.x,this.simpleRect.y,this.simpleRect.width,this.simpleRect.height))},b.prototype.flipCompleteHandler=function(){this.completeCallback&&this.completeCallback()},b.prototype.stop=function(){this.unitAnimator.pause(),this.updateCallback=void 0,this.completeCallback=void 0},a.MemoryGameCardFlip=b}(window),function(a){var b=function(a,b,c,d,e,f,g,h){BCHWGeom.RoundedRectangle.call(this,a,b,c,d,e),this.image=f,this.context=g,this.isOpen=!1,this.bgImage=h,this.image=f};b.prototype=Object.create(BCHWGeom.RoundedRectangle.prototype),b.prototype.constructor=BCHWGeom.RoundedRectangle,b.borderWidth=6,b.borderRect=new BCHWGeom.RoundedRectangle,b.prototype.open=function(a){a?(a.flip(this,this.context,this.bgImage,this.image,void 0,void 0,!0),this.isOpen=!0):this.renderImage()},b.prototype.close=function(a){a?(a.flip(this,this.context,this.image,this.bgImage,void 0,void 0,!0),this.isOpen=!1):this.renderBackgroundImage()},b.prototype.renderBackgroundImage=function(){this.context.clearRect(this.x,this.y,this.width,this.height),this.bgColor&&(this.context.fillStyle=this.bgColor,this.drawPathToContext(this.context),this.context.fill()),this.context.drawImage(this.bgImage,this.x,this.y,this.width,this.height)},b.prototype.renderImage=function(){this.context.clearRect(this.x,this.y,this.width,this.height),this.color&&(this.context.fillStyle=this.color,this.drawPathToContext(this.context),this.context.fill()),this.context.drawImage(this.image,this.x,this.y,this.width,this.height)},b.prototype.prepareBorderRect=function(){var a=Math.ceil(b.borderWidth/2);b.borderRect.updateToRect(this),b.borderRect.radius=this.radius,b.borderRect.x+=a,b.borderRect.y+=a,b.borderRect.width-=2*a,b.borderRect.height-=2*a},b.prototype.showMismatch=function(){this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=b.borderWidth,this.prepareBorderRect(),b.borderRect.drawPathToContext(this.context),this.context.stroke()},b.prototype.showMatch=function(){this.context.strokeStyle=BCHWColor.BCHWColorsLib.ORANGE.getCanvasColorString();var a=b.borderWidth;this.context.lineWidth=a,this.prepareBorderRect(),b.borderRect.drawPathToContext(this.context),this.context.stroke();var c=this;this.animationTimeOut=setTimeout(function(){c.renderImage()},500)},b.prototype.stop=function(){},b.prototype.stop=function(){clearTimeout(this.animationTimeOut)},a.BCHWMemoryGameGridCell=b}(window),function(a){var b=function(){this.images=[],this.preparationCanvas=document.createElement("canvas"),this.context=this.preparationCanvas.getContext("2d"),this.preparedImages=[]};b.getImageForSrcPath=function(a){for(var b=0;b<BCHWMemoryGameGridCell.preparedImages.length;b++)if(BCHWMemoryGameGridCell.preparedImages[b].src=a)return BCHWMemoryGameGridCell.preparedImages[b].preparedImage;return void 0},b.prototype.prepareImage=function(a,b,d,e){var f=new c(a);this.preparationCanvas.width=b,this.preparationCanvas.height=b,this.context.drawImage(f.sourceImage,0,0,f.sourceImage.width,f.sourceImage.height,0,0,b,b),f.preparedImage.src=this.preparationCanvas.toDataURL();var g=this;setTimeout(function(){g.prepareImage2(f,b,d,e)},20)},b.prototype.prepareImage2=function(a,b,c,d){this.context.clearRect(0,0,this.preparationCanvas.width,this.preparationCanvas.height);var e=1,f=new BCHWGeom.RoundedRectangle(e,e,b-2*e,b-2*e,c);this.context.fillStyle="#CCCCCC",f.drawPathToContext(this.context),this.context.fill();var g=this.context.createPattern(a.preparedImage,"no-repeat");f.drawPathToContext(this.context),this.context.fillStyle=g,this.context.fill(),a.preparedImage.src=this.preparationCanvas.toDataURL(),this.context.clearRect(0,0,this.preparationCanvas.width,this.preparationCanvas.height),d&&d(a.preparedImage)},a.MemoryGameCardPrep=b;var c=function(a){this.sourceImage=a,this.src=a.src,this.preparedImage=document.createElement("img")};a.MemoryGameCardImage=c}(window),function(a){var b=function(a,c,d,e,f){BCHWGeom.Rectangle.call(this,c,d,e,f),this.canvas=a,this.context=this.canvas.getContext("2d"),this.horizontalAlign=b.HORIZONTAL_ALIGN_MIDDLE};b.prototype=Object.create(BCHWGeom.Rectangle.prototype),b.prototype.constructor=BCHWGeom.Rectangle,b.VERTICAL_ALIGN_TOP="verticalAlignTop",b.VERTICAL_ALIGN_MIDDLE="verticalAlignMiddle",b.VERTICAL_ALIGN_BOTTOM="verticalAlignBottom",b.HORIZONTAL_ALIGN_LEFT="horizontalAlignLeft",b.HORIZONTAL_ALIGN_RIGHT="horizontalAlignRight",b.HORIZONTAL_ALIGN_MIDDLE="horizontalAlignMiddle",b.HORIZONTAL_ALIGN_JUSTIFY="horizontalAlignJustify",b.prototype.setVerticalAlign=function(a){switch(a){case b.VERTICAL_ALIGN_TOP:case b.VERTICAL_ALIGN_MIDDLE:case b.VERTICAL_ALIGN_BOTTOM:this.verticalAlign=a;break;default:this.verticalAlign=b.VERTICAL_ALIGN_MIDDLE}},b.prototype.setHorizontalAlign=function(a){switch(a){case b.HORIZONTAL_ALIGN_LEFT:case b.HORIZONTAL_ALIGN_RIGHT:case b.HORIZONTAL_ALIGN_MIDDLE:case b.HORIZONTAL_ALIGN_JUSTIFY:this.horizontalAlign=a;break;default:this.horizontalAlign=b.HORIZONTAL_ALIGN_MIDDLE}},b.prototype.clear=function(){this.context.clearRect(this.x,this.y,this.width,this.height)},a.LayoutRectangle=b}(window),function(a){var b=function(a,b,c,d,e){LayoutRectangle.call(this,a,b,c,d,e),this.characters=[]};b.prototype=Object.create(LayoutRectangle.prototype),b.prototype.constructor=LayoutRectangle,b.prototype.addCharacter=function(a){this.characters.push(a)},b.prototype.layoutCharacters=function(){this["layoutCharacters_"+this.horizontalAlign]()},b.prototype.getContentRect=function(a){var b,c,d=0;for(b=0;b<this.characters.length;b++)c=this.characters[b],d+=a*c.width;return new BCHWGeom.Rectangle(0,0,d,a)},b.prototype.layoutCharacters_horizontalAlignLeft=function(){var a,b,c,d=this.x+0;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.x=d,b.y=this.y,b.width=this.height*c.width,b.height=this.height,d+=b.width
},b.prototype.layoutCharacters_horizontalAlignRight=function(){var a,b,c,d=this.getRight();for(a=this.characters.length-1;a>-1;a--)c=this.characters[a],b=c.roundedRect,b.width=this.height*c.width,b.x=d-b.width,b.y=this.y,b.height=this.height,d-=b.width},b.prototype.layoutCharacters_horizontalAlignMiddle=function(){var a,b,c,d=0;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.y=this.y,b.width=this.height*c.width,b.height=this.height,d+=b.width;var e=BCHWGeom.RectangleUtil.getCenterX(this)-d/2;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.x=e,e+=b.width},b.prototype.layoutCharacters_horizontalAlignJustify=function(){console.log("layoutCharacters_horizontalAlignJustify() NOT IMPLENTED YET"),this.layoutCharacters_horizontalAlignLeft()},a.BCHWFontLayoutRect=b}(window),function(a){var b=function(){this.width=1,this.color=new BCHWColor.createRGBAColor,this.thickness=1,this.roundedRect};b.prototype.renderFunction=function(){},b.prototype.renderToContext=function(a){this.renderFunction(a,this)},b.prototype.addRandomness=function(a,b){this.roundedRect.x+=BCHWMathUtil.getRandomNumberInRange(-a,a),this.roundedRect.y+=BCHWMathUtil.getRandomNumberInRange(-a,a),this.roundedRect.scaleX(1+BCHWMathUtil.getRandomNumberInRange(-b,b)),this.roundedRect.scaleY(1+BCHWMathUtil.getRandomNumberInRange(-b,b))},b.createBCHWFontCharacter=function(a,c,d,e,f){var g=new b;g.color=c,g.lineColor=d,g.thickness=e,g.roundedRect=f;var h=BCHWFontCharacterRenderer.getRenderFunction(a);return h&&(g.renderFunction=h),g.width=BCHWFontCharacterRenderer.getCharacterWidthPercent(a),g},a.BCHWFontCharacter=b}(window),function(a){var b=function(){};b.renderRoundedRectToContext=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString(),a.moveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.lineTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.height-b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.height,b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.lineTo(b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.height,b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.height-b.roundedRect.radius),a.lineTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y,b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y),a.lineTo(b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y,b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.fill(),a.stroke()},b.getRenderFunction=function(a){if(!a||void 0==a)return null;switch(a.toLowerCase()){case"b":case"c":case"e":case"f":case"g":case"h":case"i":case"m":case"o":case"r":case"s":case"t":case"u":case"w":case"y":return b["render"+a.toUpperCase()]}return null},b.getCharacterWidthPercent=function(a){var b=1;if(!a||void 0==a)return b;switch(a.toLowerCase()){case"b":b=1;break;case"c":b=.9;break;case"e":b=.8;break;case"f":b=.8;break;case"g":b=.9;break;case"h":b=.9;break;case"i":b=.5;break;case"m":b=1.2;break;case"o":b=.9;break;case"r":b=1;break;case"s":b=.8;break;case"t":b=1;break;case"u":b=.9;break;case"w":b=1.2;break;case"y":b=1}return b},b.renderB=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2;a.moveTo(d,e),a.lineTo(d-c.roundedRect.width/4,e);var f=c.roundedRect.height/4;a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+f),a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+3*f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+3*f),a.stroke()},b.renderC=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2,f=c.roundedRect.x+c.roundedRect.width/2;a.moveTo(d,e),a.lineTo(f,e);var g=c.roundedRect.height/4;a.moveTo(f,c.roundedRect.y+g),a.lineTo(f,c.roundedRect.y+3*g),a.stroke()},b.renderE=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.width/4,f=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+f),a.lineTo(d-e,c.roundedRect.y+f),a.moveTo(d,c.roundedRect.y+2*f),a.lineTo(d-e,c.roundedRect.y+2*f),a.stroke()},b.renderF=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect.width/3,d=b.roundedRect.height/3,e=b.roundedRect.x+b.roundedRect.width,f=b.roundedRect.y+b.roundedRect.height;a.moveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.lineTo(b.roundedRect.x,f-b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x,f,b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.lineTo(b.roundedRect.x+2*c-b.roundedRect.radius,f),a.quadraticCurveTo(b.roundedRect.x+2*c,f,b.roundedRect.x+2*c,f-b.roundedRect.radius),a.lineTo(b.roundedRect.x+2*c,f-d),a.lineTo(e-b.roundedRect.radius,f-d),a.quadraticCurveTo(e,f-d,e,f-d-b.roundedRect.radius),a.lineTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y,b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y),a.lineTo(b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y,b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.fill(),a.stroke(),a.beginPath(),a.lineWidth=b.thickness,a.strokeStyle=b.lineColor.getCanvasColorString(),a.moveTo(e,b.roundedRect.y+d),a.lineTo(e-c,b.roundedRect.y+d),a.stroke()},b.renderG=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.x+c.roundedRect.width/2,f=c.roundedRect.y+c.roundedRect.height/1.8,g=c.roundedRect.width/4,h=c.roundedRect.height/4;a.moveTo(d,f),a.lineTo(e,f),a.lineTo(e,f+h),a.lineTo(e+g,f+h),a.stroke()},b.renderH=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/4;a.moveTo(d,c.roundedRect.y),a.lineTo(d,c.roundedRect.y+e),a.moveTo(d,c.roundedRect.y+c.roundedRect.height),a.lineTo(d,c.roundedRect.y+c.roundedRect.height-e),a.stroke()},b.renderI=function(a,c){b.renderRoundedRectToContext(a,c)},b.renderM=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.height/3,e=c.roundedRect.width/3;a.moveTo(c.roundedRect.x+e,c.roundedRect.getBottom()),a.lineTo(c.roundedRect.x+e,c.roundedRect.getBottom()-d),a.moveTo(c.roundedRect.x+2*e,c.roundedRect.getBottom()),a.lineTo(c.roundedRect.x+2*e,c.roundedRect.getBottom()-d),a.stroke()},b.renderO=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+e),a.lineTo(d,c.roundedRect.y+2*e),a.stroke()},b.renderR=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2;a.moveTo(d,e),a.lineTo(d-c.roundedRect.width/4,e);var f=c.roundedRect.height/4;a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+f);var g=c.roundedRect.x+c.roundedRect.width/2;a.moveTo(g,c.roundedRect.getBottom()-f),a.lineTo(g,c.roundedRect.getBottom()),a.stroke()},b.renderS=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.width/3,f=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+f),a.lineTo(d-e,c.roundedRect.y+f),a.moveTo(c.roundedRect.x,c.roundedRect.y+2*f),a.lineTo(c.roundedRect.x+e,c.roundedRect.y+2*f),a.stroke()},b.renderT=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect,d=b.roundedRect.radius,e=c.width/3,f=c.height/3,g=c.x+c.width,h=c.y+c.height;a.moveTo(c.x,c.y+d),a.lineTo(c.x,h-f-d),a.quadraticCurveTo(c.x,h-f,c.x+d,h-f),a.lineTo(c.x+e-d,h-f),a.quadraticCurveTo(c.x+e,h-f,c.x+e,h-f+d),a.lineTo(c.x+e,h-d),a.quadraticCurveTo(c.x+e,h,c.x+e+d,h),a.lineTo(c.x+2*e-d,h),a.quadraticCurveTo(c.x+2*e,h,c.x+2*e,h-d),a.lineTo(c.x+2*e,h-f+d),a.quadraticCurveTo(c.x+2*e,h-f,c.x+2*e+d,h-f),a.lineTo(g-d,h-f),a.quadraticCurveTo(g,h-f,g,h-f-d),a.lineTo(g,c.y+d),a.quadraticCurveTo(g,c.y,g-d,c.y),a.lineTo(c.x+d,c.y),a.quadraticCurveTo(c.x,c.y,c.x,c.y+d),a.fill(),a.stroke()},b.renderU=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/4;a.moveTo(d,c.roundedRect.y),a.lineTo(d,c.roundedRect.y+e),a.stroke()},b.renderW=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.height/3,e=c.roundedRect.width/3;a.moveTo(c.roundedRect.x+e,c.roundedRect.y),a.lineTo(c.roundedRect.x+e,c.roundedRect.y+d),a.moveTo(c.roundedRect.x+2*e,c.roundedRect.y),a.lineTo(c.roundedRect.x+2*e,c.roundedRect.y+d),a.stroke()},b.renderY=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect,d=b.roundedRect.radius,e=c.width/3,f=c.height/3,g=c.x+c.width,h=c.y+c.height;a.moveTo(c.x,c.y+d),a.lineTo(c.x,h-f-d),a.quadraticCurveTo(c.x,h-f,c.x+d,h-f),a.lineTo(c.x+e-d,h-f),a.quadraticCurveTo(c.x+e,h-f,c.x+e,h-f+d),a.lineTo(c.x+e,h-d),a.quadraticCurveTo(c.x+e,h,c.x+e+d,h),a.lineTo(c.x+2*e-d,h),a.quadraticCurveTo(c.x+2*e,h,c.x+2*e,h-d),a.lineTo(c.x+2*e,h-f+d),a.quadraticCurveTo(c.x+2*e,h-f,c.x+2*e+d,h-f),a.lineTo(g-d,h-f),a.quadraticCurveTo(g,h-f,g,h-f-d),a.lineTo(g,c.y+d),a.quadraticCurveTo(g,c.y,g-d,c.y),a.lineTo(c.x+d,c.y),a.quadraticCurveTo(c.x,c.y,c.x,c.y+d),a.fill(),a.stroke(),a.beginPath(),a.lineWidth=b.thickness,a.strokeStyle=b.lineColor.getCanvasColorString();var i=c.x+c.width/2,j=c.height/4;a.moveTo(i,c.y),a.lineTo(i,c.y+j),a.stroke()},a.BCHWFontCharacterRenderer=b}(window),function(a){var b=function(a){this.logoString="memory",this.canvas=a,this.context=this.canvas.getContext("2d"),this.flipper=new MemoryGameCardFlip};b.prototype.render=function(a){var b=a.width/this.logoString.length,c=a.height/3,d=Math.min(b,c),e=.1*d;this.cellSize=d-e;var f=this.logoString.length*d,g=a.getCenterX()-f/2;this.cellRadius=.08*this.cellSize,this.characterMargin=.2*this.cellSize;var h=new BCHWGeom.RoundedRectangle(this.characterMargin,this.characterMargin,this.cellSize-2*this.characterMargin,this.cellSize-2*this.characterMargin,this.cellRadius);this.cells=[];var i,j,k,l,m;for(this.renderCanvas=document.createElement("canvas"),this.renderCanvas.width=this.cellSize,this.renderCanvas.height=this.cellSize,this.renderContext=this.renderCanvas.getContext("2d"),this.characterImages=[],i=0;i<this.logoString.length;i++)l=BCHWColor.BCHWColorsLib.getNextColor(l),k=BCHWFontCharacter.createBCHWFontCharacter(this.logoString.charAt(i),l,BCHWColor.BCHWColorsLib.WHITE,4,h),m=document.createElement("img"),k.renderToContext(this.renderContext),m.src=this.renderCanvas.toDataURL(),this.characterImages[i]=m,j=new BCHWMemoryGameGridCell(g+i*d,a.y,this.cellSize,this.cellSize,this.cellRadius,null,this.context),this.cells.push(j),this.renderContext.clearRect(0,0,this.renderCanvas.width,this.renderCanvas.height);this.cardPrep=new MemoryGameCardPrep,this.currentImagePrepIndex=0;var n=this;this.renderCellsTimeOutId=setTimeout(function(){n.prepareNextLogoImage()},20)},b.prototype.prepareNextLogoImage=function(){var a=this.characterImages[this.currentImagePrepIndex],b=this;this.cardPrep.prepareImage(a,this.cellSize,this.cellRadius,function(a){b.nextLogoImagePrepComplete(a)})},b.prototype.nextLogoImagePrepComplete=function(a){if(this.cells[this.currentImagePrepIndex].image=a,this.cells[this.currentImagePrepIndex].bgImage=a,this.cells[this.currentImagePrepIndex].close(),this.cells[this.currentImagePrepIndex].open(this.flipper),this.currentImagePrepIndex++,this.currentImagePrepIndex==this.characterImages.length)this.logoPreparationReady();else{var b=this;this.renderCellsTimeOutId=setTimeout(function(){b.prepareNextLogoImage()},600)}},b.prototype.logoPreparationReady=function(){this.start()},b.prototype.start=function(){var a=this;this.flipTimeOutId=setTimeout(function(){a.flipRandomCard()},1e3)},b.prototype.stop=function(){this.flipper.stop(),clearTimeout(this.renderCellsTimeOutId),clearTimeout(this.flipTimeOutId),this.canvas.removeEventListener("click",this.gridCellClickListener),this.gridCellClickListener=null},b.prototype.destroy=function(){this.stop()},b.prototype.flipRandomCard=function(){this.currentFlipCard=this.cells[Math.floor(Math.random()*this.cells.length)],this.currentFlipCard.isOpen?this.currentFlipCard.close(this.flipper):this.currentFlipCard.open(this.flipper);var a=this;this.flipTimeOutId=setTimeout(function(){a.flipRandomCard()},2e3)},a.MemoryGameLogo=b}(window),function(window){var BCHWMemoryGame=function(){this.margin=.05,this.lineThickness=4,this.resizeTimeoutId=-1,this.gamesPlayed=0};BCHWMemoryGame.MINIMUM_TILE_SIZE=100,BCHWMemoryGame.MAX_TILE_SIZE=250,BCHWMemoryGame.MINIMUM_GRID_TILES=3,BCHWMemoryGame.REFRESH_AFTER_RESIZE_INTERVAL=300,BCHWMemoryGame.MISMATCH_INTERVAL=800,BCHWMemoryGame.prototype.init=function(a){this.canvas=document.createElement("canvas"),this.canvasContainer=a,this.context=this.canvas.getContext("2d"),this.context.lineCap="round",this.canvasContainer.appendChild(this.canvas),this.recordManager=new BCHWMemoryGameRecordsManager,this.cardsColor=BCHWColor.BCHWColorsLib.getRandomFillPaletteColorString(),this.flippers=[new MemoryGameCardFlip,new MemoryGameCardFlip],this.currentFlipperIndex=0,this.logo=new MemoryGameLogo(this.canvas),MemoryGameCardFlip.useGradient=!this.isMobile(),MemoryGameCardFlip.useSimpleFlip=this.isMobile(),this.cardPrep=new MemoryGameCardPrep,this.reset()},BCHWMemoryGame.prototype.getFlipper=function(){var a=this.flippers[this.currentFlipperIndex];return this.currentFlipperIndex++,this.currentFlipperIndex%=2,a},BCHWMemoryGame.prototype.isMobile=function(){return navigator.appVersion.indexOf("Mobile")>-1},BCHWMemoryGame.prototype.clearContext=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},BCHWMemoryGame.prototype.resizeHandler=function(){this.clearContext(),clearTimeout(this.resizeTimeoutId),clearTimeout(this.renderCellsTimeOutId),this.flippers[0].stop(),this.flippers[1].stop();var a=this;this.resizeTimeoutId=setTimeout(function(){a.reset()},BCHWMemoryGame.REFRESH_AFTER_RESIZE_INTERVAL)},BCHWMemoryGame.prototype.reset=function(){this.canvas.width=this.canvasContainer.clientWidth,this.canvas.height=this.canvasContainer.clientHeight,this.clearContext();var a,b;this.canvasContainer.clientWidth>800?(this.lineThickness=4,a=4,b=4):(this.lineThickness=2,a=this.canvas.width*this.margin,b=this.canvas.height*this.margin),this.canvasContainer.clientWidth<450&&(this.lineThickness=1),this.renderRect=new BCHWGeom.Rectangle(a,b,this.canvas.width-2*a,this.canvas.height-2*b),this.createPossibleGrids(),this.loadAssets()},BCHWMemoryGame.prototype.loadAssets=function(){this.assetsImageStore=new BCHWImageStore;var a=this;this.cardBackPath="assets/memoryGameCardBack.png",this.assetsImageStore.loadImages([this.cardBackPath],function(){a.assetsLoadedHandler()})},BCHWMemoryGame.prototype.assetsLoadedHandler=function(){this.cardBackImage=this.assetsImageStore.images[0],this.enterHomeScreen()},BCHWMemoryGame.prototype.createPossibleGrids=function(){this.grids=[];for(var a=Math.floor(this.renderRect.width/BCHWMemoryGame.MINIMUM_TILE_SIZE),b=Math.floor(this.renderRect.height/BCHWMemoryGame.MINIMUM_TILE_SIZE);a>BCHWMemoryGame.MINIMUM_GRID_TILES||b>BCHWMemoryGame.MINIMUM_GRID_TILES;)a*b%2==0&&this.grids.push(new BCHWMemoryGameGrid(a,b)),a>BCHWMemoryGame.MINIMUM_GRID_TILES&&a--,b>BCHWMemoryGame.MINIMUM_GRID_TILES&&b--},BCHWMemoryGame.prototype.enterHomeScreen=function(){this.clearContext();var a=50,b=Math.floor(Math.sqrt(this.grids.length)),c=Math.floor(this.grids.length/b),d=this.renderRect.getCenterX()-b*a/2,e=this.renderRect.getCenterY()-c*a/2;this.context.fillStyle="#FFFFFF",this.context.font="24px Verdana",this.context.fillText("Difficulty:",d,e-30);for(var f=0;f<this.grids.length;f++)this.grids[f].renderRect.update(d+f%b*a,e+Math.floor(f/b)*a,a,a),this.renderGridPreview(this.grids[f]),this.recordManager.addGrid(this.grids[f]);var g=this;this.canvasClickListener=function(a){g.canvasClickHandlerHome(a)},this.canvas.addEventListener("click",this.canvasClickListener,!1),this.logoBounds=new BCHWGeom.Rectangle,this.logoBounds.updateToRect(this.renderRect),this.logo.render(this.renderRect,this.lineThickness)},BCHWMemoryGame.prototype.canvasClickHandlerHome=function(a){for(var b=a.pageX-this.canvasContainer.offsetLeft,c=a.pageY-this.canvasContainer.offsetTop,d=0;d<this.grids.length;d++)if(this.grids[d].renderRect.containsPoint(b,c))return this.canvas.removeEventListener("click",this.canvasClickListener,!1),this.enterGameScreen(this.grids[d]),void 0},BCHWMemoryGame.prototype.renderGridPreview=function(a){this.context.fillStyle="#FF0000";for(var b=Math.min(a.renderRect.width/a.cols,a.renderRect.height/a.rows),c=0;c<a.rows;c++)for(var d=0;d<a.cols;d++)this.context.fillRect(a.renderRect.x+d*b+1,a.renderRect.y+c*b+1,b-2,b-2)},BCHWMemoryGame.prototype.enterGameScreen=function(a){this.logo.destroy(),this.clearContext(),this.selectedGrid=a,this.imagesManager=new BCHWMemoryGameImagesManager;var b=this;this.imagesManager.loadImageList(function(){b.imageListLoadCompleteHandler()})},BCHWMemoryGame.prototype.imageListLoadCompleteHandler=function(){this.clearContext();var a=this.imagesManager.getRandomImages(this.selectedGrid.numCells()/2);this.imageStore=new BCHWImageStore;var b=this;this.imageStore.loadImages(a,function(){b.imageStoreLoadCompleteHandler()},function(){b.imageStoreProgressHandler()})},BCHWMemoryGame.prototype.imageStoreProgressHandler=function(){this.clearContext(),this.imageStore.getProgressString(),this.context.textAlign="center",this.context.fillStyle="#FFFFFF",this.context.font="30px Verdana",this.context.fillText(this.imageStore.getProgressString(),this.renderRect.getCenterX(),this.renderRect.getCenterY())},BCHWMemoryGame.prototype.imageStoreLoadCompleteHandler=function(){console.log("BCHWMemoryGame.imageStoreLoadCompleteHandler()"),this.clearContext();var a,b;a=Math.min(this.renderRect.width/this.selectedGrid.cols,this.renderRect.height/this.selectedGrid.rows),b=.1*a,a-=b,this.cellSize=Math.floor(a>BCHWMemoryGame.MAX_TILE_SIZE?BCHWMemoryGame.MAX_TILE_SIZE:a),this.cellRadius=.1*a;var c=new BCHWGeom.Rectangle(0,0,a*this.selectedGrid.cols+b*(this.selectedGrid.cols-1),a*this.selectedGrid.rows+b*(this.selectedGrid.rows-1));BCHWGeom.RectangleUtil.horizontalAlignMiddle(this.renderRect,c),BCHWGeom.RectangleUtil.verticalAlignMiddle(this.renderRect,c),this.cells=[];var d,e,f;for(d=0;d<this.selectedGrid.rows;d++)for(e=0;e<this.selectedGrid.cols;e++)f=new BCHWMemoryGameGridCell(c.x+e*a+e*b,c.y+d*this.cellSize+d*b,this.cellSize,this.cellSize,this.cellRadius,null,this.context),this.cells.push(f);this.clicksEnabled=!1;var g=this;this.cardPrep.prepareImage(this.cardBackImage,this.cellSize,this.cellRadius,function(a){g.bgCardPrepareComplete(a)})},BCHWMemoryGame.prototype.bgCardPrepareComplete=function(a){this.preparedBGCardImage=a,this.preparedImages=[],this.currentImagePrepIndex=0;var b=this;this.renderCellsTimeOutId=setTimeout(function(){b.prepareNextImage()},20)},BCHWMemoryGame.prototype.prepareNextImage=function(){var a=this.imageStore.images[this.currentImagePrepIndex],b=this;this.cardPrep.prepareImage(a,this.cellSize,this.cellRadius,function(a){b.nextCellImagePrepComplete(a)})},BCHWMemoryGame.prototype.nextCellImagePrepComplete=function(a){if(console.log("BCHWMemoryGame.nextCellImagePrepComplete()"),this.preparedImages.push(a),this.currentImagePrepIndex++,this.currentImagePrepIndex==this.imageStore.images.length)this.gamePreparationReady();else{var b=this;this.renderCellsTimeOutId=setTimeout(function(){b.prepareNextImage()},20)}},BCHWMemoryGame.prototype.createImagePairs=function(){console.log("BCHWMemoryGame.createImagePairs()");var a=this.cells.concat();console.log("	","cells",a.length),console.log("	","images",this.preparedImages.length);for(var b,c=0;this.preparedImages.length>0;)b=this.preparedImages.splice(Math.floor(Math.random()*this.preparedImages.length),1)[0],console.log("	image==undefined : ",void 0==b),cell=a.splice(Math.floor(Math.random()*a.length),1)[0],cell.image=b,cell.bgImage=this.preparedBGCardImage,cell.close(),cell=a.splice(Math.floor(Math.random()*a.length),1)[0],cell.image=b,cell.bgImage=this.preparedBGCardImage,cell.close(),c++},BCHWMemoryGame.prototype.gamePreparationReady=function(){console.log("BCHWMemoryGame.gamePreparationReady()"),this.createImagePairs(),this.currentPair=[],this.numMatches=0;var a=this;this.gridCellClickListener=function(b){a.gridCellClickHandler(b)},this.canvas.addEventListener("click",this.gridCellClickListener,!1),this.clicksEnabled=!0,this.startTime=(new Date).getTime(),this.numAttempts=0},BCHWMemoryGame.prototype.gridCellClickHandler=function(a){if(this.clicksEnabled)for(var b=a.pageX-this.canvasContainer.offsetLeft,c=a.pageY-this.canvasContainer.offsetTop,d=0;d<this.cells.length;d++)if(this.cells[d].containsPoint(b,c)&&!this.cells[d].isOpen){var e=this.getFlipper();if(this.cells[d].open(e),this.currentPair.push(this.cells[d]),2==this.currentPair.length){var f=this;e.completeCallback=function(){f.assessMatch()},this.numAttempts++}break}},BCHWMemoryGame.prototype.assessMatch=function(){var a=this.currentPair[0],b=this.currentPair[1],c=this;a.image.src==b.image.src?(this.currentPair=[],a.showMatch(),b.showMatch(),this.numMatches++,this.numMatches==this.imageStore.images.length&&(this.clicksEnabled=!1,setTimeout(function(){c.enterWinScreen()},2e3))):(this.clicksEnabled=!1,this.currentPair[0].showMismatch(),this.currentPair[1].showMismatch(),setTimeout(function(){c.handleMisMatch()},BCHWMemoryGame.MISMATCH_INTERVAL))},BCHWMemoryGame.prototype.handleMisMatch=function(){var a=this.currentPair[0],b=this.currentPair[1],c=this.getFlipper();a.close(c),b.close(this.getFlipper()),this.currentPair=[];var d=this;c.completeCallback=function(){d.clicksEnabled=!0}},BCHWMemoryGame.prototype.enterWinScreen=function(){this.clearContext();var a=this.recordManager.getGridRecord(this.selectedGrid),b=(new Date).getTime()-this.startTime,c=Math.floor(b/1e3%60),d=Math.floor(b/6e4%60),e=Math.floor(b/36e5%24),f="It took you "+this.numAttempts+" tries and ",g="";e>0&&(g+=e+"hours, "),d>0&&(g+=d+"minutes, "),""!=g&&(g+="and "),g+=c+"seconds",f+=g;var h="",i="";b<a.recordTime&&(a.recordTime=b,h="Congrats, new time record!"),this.numAttempts<a.recordTries&&(a.recordTries=this.numAttempts,i="Congrats, new record tries!"),this.context.textAlign="center",this.context.fillStyle="#FFFFFF",this.context.font="30px Verdana",this.context.fillText("Congrats, YOU WIN!!!",this.renderRect.getCenterX(),this.renderRect.getCenterY()),this.context.font="22px Verdana",this.context.fillText(f,this.renderRect.getCenterX(),this.renderRect.getCenterY()+30),this.context.font="30px Verdana",a.gamesPlayed>0&&(this.context.font="22px Verdana",""!=h||""!=i?(this.context.fillStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.fillText(h+" "+i,this.renderRect.getCenterX(),this.renderRect.getCenterY()+60)):(this.context.fillStyle=BCHWColor.BCHWColorsLib.ORANGE.getCanvasColorString(),this.context.fillText("your record tries "+a.recordTries+": , your record time :"+a.recordTime,this.renderRect.getCenterX(),this.renderRect.getCenterY()+60))),this.context.fillStyle="#FFFFFF",this.context.fillText("Click to play again.",this.renderRect.getCenterX(),this.renderRect.getBottom()-30),this.canvas.removeEventListener("click",this.gridCellClickListener,!1);var j=this;this.restartClickListener=function(a){j.restartClickHandler(a)},this.canvas.addEventListener("click",this.restartClickListener,!1),a.gamesPlayed++,this.gamesPlayed++},BCHWMemoryGame.prototype.restartClickHandler=function(){this.canvas.removeEventListener("click",this.restartClickListener,!1),this.reset()},window.BCHWMemoryGame=BCHWMemoryGame;var BCHWMemoryGameGrid=function(a,b){this.rows=b,this.cols=a,this.renderRect=new BCHWGeom.Rectangle};BCHWMemoryGameGrid.prototype.numCells=function(){return this.rows*this.cols},window.BCHWMemoryGameGrid=BCHWMemoryGameGrid;var BCHWMemoryGameImagesManager=function(){};BCHWMemoryGameImagesManager.prototype.loadImageList=function(a){this.request=null,this.request=new XMLHttpRequest;var b=this;this.request.onreadystatechange=function(){b.imagesListLoadedHandler()},this.request.open("GET","http://bigcityhousewife.net/php/getFilesInDirectory.php?directory=..%2fassets%2fmemoryGame%2fxmas%2f",!0),this.themeFolder="assets/memoryGame/xmas/",this.request.send(null),this.imageListLoadedCallBack=a?a:null},BCHWMemoryGameImagesManager.prototype.imagesListLoadedHandler=function(){4==this.request.readyState&&200==this.request.status&&(this.imageList=eval(this.request.responseText),this.request.onreadystatechange=null,this.imageListLoadedCallBack&&(this.imageListLoadedCallBack(),this.imageListLoadedCallBack=null))},BCHWMemoryGameImagesManager.prototype.getRandomImages=function(a){a>this.imageList.length&&console.warn("BCHWMemoryGameImagesManager.getRandomImages() requested "+a+" is more than available images"+this.imageList.length);var b=[],c=this.imageList.concat();console.log("BCHWMemoryGameImagesManager.getRandomImages() ",a,c.length);for(var d=0;a>d;d++)b[d]=this.themeFolder+c.splice(Math.floor(Math.random()*c.length),1)[0];return b},window.BCHWMemoryGameImagesManager=BCHWMemoryGameImagesManager;var BCHWMemoryGameRecordsManager=function(){this.grids=[]};BCHWMemoryGameRecordsManager.prototype.addGrid=function(a){var b=a.numCells();void 0==this.grids[b]&&(this.grids[b]=new BCHWMemoryGameGridRecord)},BCHWMemoryGameRecordsManager.prototype.getGridRecord=function(a){return this.grids[a.numCells()]},window.BCHWMemoryGameRecordsManager=BCHWMemoryGameRecordsManager;var BCHWMemoryGameGridRecord=function(){this.recordTime=Number.MAX_VALUE,this.recordTries=Number.MAX_VALUE,this.gamesPlayed=0};window.BCHWMemoryGameGridRecord=BCHWMemoryGameGridRecord}(window);