(function(b){var a=function(f,e,h,g,d){LayoutRectangle.call(this,f,e,h,g,d);this.lineThickness=4};a.prototype=Object.create(LayoutRectangle.prototype);a.prototype.constructor=LayoutRectangle;a.prototype.render=function(d){this.updateLayout(d);this.clear()};a.prototype.stop=function(){};a.prototype.updateLayout=function(d){this.width=d.width;this.height=d.width*1.5;this.x=d.x;this.y=d.y+d.height/2-this.height/2};a.prototype.renderRect=function(d){this.context.fillRect(d.x,d.y,d.width,d.height);this.context.strokeRect(d.x,d.y,d.width,d.height)};a.prototype.renderRoundedRect=function(d){this.context.beginPath();this.context.moveTo(d.x,d.y+d.radius);this.context.arc(d.x+d.radius,d.y+d.radius,d.radius,Math.PI,Math.PI+BCHWMathUtil.HALF_PI);this.context.lineTo(d.getRight()-d.radius,d.y);this.context.arc(d.getRight()-d.radius,d.y+d.radius,d.radius,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2);this.context.lineTo(d.getRight(),d.getBottom()-d.radius);this.context.arc(d.getRight()-d.radius,d.getBottom()-d.radius,d.radius,0,BCHWMathUtil.HALF_PI);this.context.lineTo(d.x+d.radius,d.getBottom());this.context.arc(d.x+d.radius,d.getBottom()-d.radius,d.radius,BCHWMathUtil.HALF_PI,Math.PI);this.context.lineTo(d.x,d.y+d.radius);this.context.fill();this.context.stroke();this.context.closePath()};b.BCHWCharacter=a;var c=function(g,e,i,h,d){a.call(this,g,e,i,h,d);var f=BCHWColor.BCHWColorsLib.getRandomFillPaletteColor();this.shirtFillStyle=f.getCanvasColorString();this.pantsFillStyle=BCHWColor.BCHWColorsLib.getNextColorString(f)};c.prototype=Object.create(a.prototype);c.prototype.constructor=a;c.prototype.render=function(e,d){this.updateLayout(e);this.clear();this.lineThickness=d;this.context.lineWidth=this.lineThickness;this.context.strokeStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString();this.renderHead();this.renderBody();this.renderArms();this.renderMouth();this.renderEyes()};c.prototype.stop=function(d){};c.prototype.renderHead=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_GRAY.getCanvasColorString();this.hairRect=new BCHWGeom.RoundedRectangle(this.x,this.y,this.width,this.height*0.3,6);this.renderRoundedRect(this.hairRect);this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString();this.faceRect=new BCHWGeom.RoundedRectangle(this.x+this.width/4,this.hairRect.y+this.hairRect.height/3,this.width/2,this.height*0.26,8);this.renderRoundedRect(this.faceRect)};c.prototype.renderBody=function(){this.context.fillStyle=this.shirtFillStyle;this.bodyRect=new BCHWGeom.RoundedRectangle(0,this.faceRect.getBottom(),this.faceRect.width*0.95,this.height*0.33,9);this.bodyRect.x=(this.faceRect.x+this.faceRect.width/2)-(this.bodyRect.width/2);this.renderRoundedRect(this.bodyRect);this.context.fillStyle=this.pantsFillStyle;this.pantsRect=new BCHWGeom.RoundedRectangle(this.faceRect.x,this.bodyRect.getBottom()-this.faceRect.radius,this.faceRect.width,this.bodyRect.height/3);this.renderRoundedRect(this.pantsRect);this.shoeRect=new BCHWGeom.RoundedRectangle(this.pantsRect.x,this.pantsRect.getBottom(),this.pantsRect.width/2,this.pantsRect.height/4,2);this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString();this.renderRoundedRect(this.shoeRect);this.shoeRect.x=this.pantsRect.x+this.pantsRect.width/2;this.renderRoundedRect(this.shoeRect)};c.prototype.renderArms=function(){var e=this.bodyRect.y+this.bodyRect.height/5;var d=(this.bodyRect.x-this.hairRect.x)/3;this.context.beginPath();this.context.moveTo(this.bodyRect.x,e);this.context.lineTo(this.bodyRect.x-d-Math.random()*d,e+Math.random()*(this.bodyRect.height/5));this.context.lineTo(this.bodyRect.x,this.bodyRect.getBottom()-this.bodyRect.height/5-Math.random()*(this.bodyRect.height/5));this.context.closePath();this.context.stroke();this.context.beginPath();this.context.moveTo(this.bodyRect.getRight(),e);this.context.lineTo(this.bodyRect.getRight()+d+Math.random()*d,e+Math.random()*(this.bodyRect.height/5));this.context.lineTo(this.bodyRect.getRight(),this.bodyRect.getBottom()-this.bodyRect.height/5-Math.random()*(this.bodyRect.height/5));this.context.closePath();this.context.stroke()};c.mouthFunctions=["renderTriangleMouth","renderSmileMouth","renderFrownMouth","renderOpenMouth"];c.prototype.renderMouth=function(){this[c.mouthFunctions[Math.floor(Math.random()*c.mouthFunctions.length)]]()};c.prototype.renderTriangleMouth=function(){this.context.beginPath();var d=(this.faceRect.getBottom()-this.hairRect.getBottom())/3;var e=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,d+Math.random()*d);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString();this.context.lineWidth=this.lineThickness/2;this.context.moveTo(e.x,e.y);this.context.lineTo(e.getRight(),e.y+e.height/2);this.context.lineTo(e.x,e.getBottom());this.context.lineTo(e.x,e.y);this.context.closePath();this.context.stroke()};c.prototype.renderSmileMouth=function(){this.context.beginPath();var d=(this.faceRect.getBottom()-this.hairRect.getBottom())/3;var g=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,d+Math.random()*d);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString();this.context.lineWidth=this.lineThickness/2;var f=g.y+Math.random()*(g.height/2);var e=g.y+Math.random()*(g.height/2);var h=new BCHWGeom.Point(g.x+g.width*0.25+Math.random()*(g.width/2),g.getBottom()+Math.random()*(g.height/2));var i=new BCHWGeom.Point(h.x,h.y+10+Math.random()*(g.height/2));this.context.moveTo(g.x,f);this.context.quadraticCurveTo(h.x,h.y,g.getRight(),e);this.context.quadraticCurveTo(i.x,i.y,g.x,f);this.context.closePath();this.context.stroke()};c.prototype.renderFrownMouth=function(){this.context.beginPath();var d=(this.faceRect.getBottom()-this.hairRect.getBottom())/3;var e=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,d+Math.random()*d);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString();this.context.lineWidth=this.lineThickness/2;this.context.moveTo(e.x,e.y+Math.random()*e.height);this.context.lineTo(e.x+e.width*0.25,e.y+Math.random()*e.height);this.context.lineTo(e.getRight(),e.y+Math.random()*e.height);this.context.stroke()};c.prototype.renderOpenMouth=function(){this.context.beginPath();var d=(this.faceRect.getBottom()-this.hairRect.getBottom())/3;var e=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,d+Math.random()*d);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString();this.context.lineWidth=this.lineThickness/2;this.context.arc(e.getCenterX(),e.getCenterY(),e.height/2,0,BCHWMathUtil.PI2);this.context.closePath();this.context.stroke()};c.prototype.renderEyes=function(){this.eyeRectRight=new BCHWGeom.Rectangle(this.faceRect.x+this.faceRect.width/7,this.faceRect.y+this.faceRect.height/4,this.faceRect.width/4.2,this.faceRect.height/5);this.context.lineWidth=1;this.context.strokeStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString();this.renderRect(this.eyeRectRight);this.eyeRectLeft=new BCHWGeom.Rectangle(this.faceRect.x+this.faceRect.width-this.faceRect.width/7-this.eyeRectRight.width,this.eyeRectRight.y,this.eyeRectRight.width,this.eyeRectRight.height);this.renderRect(this.eyeRectLeft);this.context.lineWidth=0;this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString();this.pupilRect=new BCHWGeom.Rectangle(0,0,this.eyeRectRight.width*0.6,this.eyeRectRight.height);var d=this.eyeRectRight.height/2;var f=this.eyeRectRight.width/2;var g=(Math.random()*d)*(Math.random()>0.5?1:-1);var e=(Math.random()*f)*(Math.random()>0.5?1:-1);var i=new BCHWGeom.Rectangle(0,0,this.pupilRect.width,this.pupilRect.height);i.x=this.eyeRectRight.getCenterX()-this.pupilRect.getCenterX()-e;i.y=this.eyeRectRight.getCenterY()-this.pupilRect.getCenterY()-g;var h=BCHWGeom.RectangleUtil.getIntersectingRectangle(this.eyeRectRight,i);if(h){this.renderRect(h)}else{this.renderRect(i)}var j=new BCHWGeom.Rectangle(0,0,this.pupilRect.width,this.pupilRect.height);j.x=this.eyeRectLeft.getCenterX()-this.pupilRect.getCenterX()-e;j.y=this.eyeRectLeft.getCenterY()-this.pupilRect.getCenterY()-g;h=BCHWGeom.RectangleUtil.getIntersectingRectangle(this.eyeRectLeft,j);if(h){this.renderRect(h)}else{this.renderRect(j)}this.context.strokeStyle=BCHWColor.BCHWColorsLib.BLACK.getCanvasColorString();this.context.lineWidth=2;this.context.beginPath();this.context.moveTo(this.faceRect.x-this.eyeRectRight.width,this.faceRect.y);this.context.lineTo(this.faceRect.x-this.eyeRectRight.width/2,this.eyeRectRight.y);this.context.lineTo(this.eyeRectRight.x,this.eyeRectRight.y);this.context.stroke();this.context.moveTo(this.faceRect.x-this.eyeRectRight.width/2,this.faceRect.y);this.context.lineTo(this.faceRect.x,this.eyeRectRight.y);this.context.stroke();this.context.beginPath();this.context.moveTo(this.faceRect.getRight()+this.eyeRectRight.width,this.faceRect.y);this.context.lineTo(this.faceRect.getRight()+this.eyeRectRight.width/2,this.eyeRectRight.y);this.context.lineTo(this.eyeRectLeft.getRight(),this.eyeRectRight.y);this.context.stroke();this.context.moveTo(this.faceRect.getRight()+this.eyeRectRight.width/2,this.faceRect.y);this.context.lineTo(this.faceRect.getRight(),this.eyeRectRight.y);this.context.stroke()};b.BCHWMom=c}(window));