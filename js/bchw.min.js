!function(window){function TweetsManager(a){this.characters=a}TweetsManager.prototype.loadTweets=function(a){this.request=null,this.request=new XMLHttpRequest;var b=this;this.request.onreadystatechange=function(){b.tweetsLoadedHandler()},this.request.open("GET","http://bigcityhousewife.net/php/getTwitterFamilyTimelines.php",!0),this.request.send(null),this.tweetsLoadedCallBack=a?a:null},TweetsManager.prototype.tweetsLoadedHandler=function(){4==this.request.readyState&&200==this.request.status&&(this.tweets=eval(this.request.responseText),this.matchTweetsToCharacters(),this.request.onreadystatechange=null,this.tweetsLoadedCallBack&&(this.tweetsLoadedCallBack(),this.tweetsLoadedCallBack=null))},TweetsManager.prototype.matchTweetsToCharacters=function(){var a,b,c,d;for(a=0;a<this.tweets.length;a++)for(b=this.tweets[a][0].user.screen_name,c=0;c<this.characters.length;c++)d=this.characters[c],d.twitterHandle==b&&(d.tweets=BCHWArrayUtil.shuffle(this.tweets[a]),d.tweetIndex=0)},TweetsManager.tweetLinkRegExp=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i,TweetsManager.tweetHashRegExp=/(^|\s)#(\w+)/g,TweetsManager.tweetUserRegExp=/(^|\s)@(\w+)/g,TweetsManager.prototype.processTweetLinks=function(a){return a=a.replace(TweetsManager.tweetLinkRegExp,"<a href='javascript: void(0)' onclick='tweetLinkClickHandler(\"$1\")' >$1</a>"),a=a.replace(TweetsManager.tweetHashRegExp,"$1<a href='javascript: void(0)' onclick='tweetLinkClickHandler(\"https://twitter.com/search?q=%23$2\")' >#$2</a>"),a=a.replace(TweetsManager.tweetUserRegExp,"$1<a href='javascript: void(0)' onclick='tweetLinkClickHandler(\"http://www.twitter.com/$2\")' >@$2</a>")},TweetsManager.prototype.tweetsLoaded=function(){return this.tweets&&this.tweets.length>0},TweetsManager.prototype.getNextTweeter=function(){return this.currentTweeter=this.characters[Math.floor(Math.random()*this.characters.length)],this.currentTweeter.tweetIndex++,this.currentTweeter.tweetIndex%=this.currentTweeter.tweets.length,this.currentTweeter},TweetsManager.prototype.getCurrentTweeter=function(){return this.currentTweeter},window.TweetsManager=TweetsManager}(window),function(a){function b(){}function c(a,b,c){this.title=a,this.link=b,this.img=c}b.prototype.load=function(a){this.request=null;var b=this;this.request=new XMLHttpRequest,this.request.onreadystatechange=function(){b.blogPostsLoadedHandler()},this.request.open("GET","http://www.bigcityhousewife.net/php/getBlogPosts.php",!0),this.request.send(null),this.blogPostsLoadedCallBack=a?a:null,this.currentPostIndex=0},b.prototype.getValueFromTagName=function(a,b){var c=a.getElementsByTagName(b);return c[0].firstChild.nodeValue},b.regExpUrlContainingSize=/-\d+x\d+\.(jpg|png|gif)$/,b.regExpUrlWithoutSize=/\.(jpg|png|gif)$/,b.prototype.setWordPressImageSize=function(a){return a=a.replace(b.regExpUrlContainingSize,"-150x150.$1"),-1==a.indexOf("150x150")&&(a=a.replace(b.regExpUrlWithoutSize,"-150x150.$1")),a},b.prototype.blogPostsLoadedHandler=function(){if(4==this.request.readyState&&200==this.request.status){var a=new DOMParser,b=a.parseFromString(this.request.responseText,"text/xml"),d=b.getElementsByTagName("item");this.posts=[];var e,f,g,h,i,j;for(e=0;e<d.length;++e)f=this.getValueFromTagName(d[e],"title"),g=this.getValueFromTagName(d[e],"link"),h=d[e].getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/","encoded")[0].firstChild.nodeValue,h&&h.indexOf(!1)&&(i=h.split('src="'),j=i[1].split('"')[0],j=this.setWordPressImageSize(j),this.posts.push(new c(f,g,j))),this.posts=BCHWArrayUtil.shuffle(this.posts);this.request.onreadystatechange=null,this.blogPostsLoadedCallBack&&(this.blogPostsLoadedCallBack(),this.blogPostsLoadedCallBack=null)}},b.prototype.rssLoaded=function(){return this.posts&&this.posts.length>0},b.prototype.getNextBlogPost=function(){return this.currentPostIndex++,this.currentPostIndex%=this.posts.length,this.posts[this.currentPostIndex]},a.BlogPostsManager=b,a.BlogPost=c}(window),function(a){var b=function(){};b.PI_180=Math.PI/180,b.ONE80_PI=180/Math.PI,b.PI2=2*Math.PI,b.HALF_PI=Math.PI/2,b.NEGATIVE_HALF_PI=-Math.PI/2,b.clamp=function(a,b,c){return a>c?a:c>b?b:c},b.clampRGB=function(a){return b.clamp(0,255,a)},b.normalize=function(a,b,c){return(a-b)/(c-b)},b.interpolate=function(a,b,c){return b+(c-b)*a},b.map=function(a,c,d,e,f){return b.interpolate(b.normalize(a,c,d),e,f)},b.constrainDegreeTo360=function(a){return(360+a%360)%360},b.constrainRadianTo2PI=function(a){return(b.PI2+a%b.PI2)%b.PI2},b.radiansToDegrees=function(a){return a*b.ONE80_PI},b.degreesToRadians=function(a){return a*b.PI_180},b.getRandomNumberInRange=function(a,b){return a+Math.random()*(b-a)},b.getRandomIntegerInRange=function(a,c){return Math.round(b.getRandomNumberInRange(a,c))},b.getCircumferenceOfEllipse=function(a,b){return 2*Math.sqrt(.5*(a*a+b*b))*Math.PI/2},a.BCHWMathUtil=b}(window),function(a){var b=function(){};b.Point=function(a,b){this.x=isNaN(a)?0:a,this.y=isNaN(b)?0:b},b.Point.prototype.clone=function(){return new b.Point(this.x,this.y)},b.Point.prototype.equals=function(a){return this.x==a.x&&this.y==a.y},b.Point.prototype.toString=function(){return"{x:"+this.x+" , y:"+this.y+"}"},b.distanceBetweenTwoPoints=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},b.angleBetweenTwoPoints=function(a,b){return Math.atan2(a.y-b.y,a.x-b.x)},b.mirrorPointInRectangle=function(a,c){return new b.Point(c.width-a.x,c.height-a.y)},b.randomizePoint=function(a,c){return new b.Point(-c+Math.random()*c+a.x,-c+Math.random()*c+a.y)},b.Triangle=function(a,c,d){this.a=a?a:new b.Point(0,0),this.b=c?c:new b.Point(0,0),this.c=d?d:new b.Point(0,0)},b.Triangle.prototype.equals=function(a){return this.a.equals(a.a)&&this.b.equals(a.b)&&this.c.equals(a.c)},b.Triangle.prototype.clone=function(){return new b.Triangle(new b.Point(this.a.x,this.a.y),new b.Point(this.b.x,this.b.y),new b.Point(this.c.x,this.c.y))},b.Triangle.prototype.getSmallestX=function(){return Math.min(this.a.x,this.b.x,this.c.x)},b.Triangle.prototype.getSmallestY=function(){return Math.min(this.a.y,this.b.y,this.c.y)},b.Triangle.prototype.getBiggestX=function(){return Math.max(this.a.x,this.b.x,this.c.x)},b.Triangle.prototype.getBiggestY=function(){return Math.max(this.a.y,this.b.y,this.c.y)},b.Triangle.prototype.containsVertex=function(a){return this.a.x==a.x&&this.a.y==a.y||this.b.x==a.x&&this.b.y==a.y||this.c.x==a.x&&this.c.y==a.y},b.Triangle.prototype.toString=function(){return"toString() Triangle{a:"+this.a+" , b:"+this.b+" , c:"+this.c+"}"},b.Triangle.prototype.containsVertex=function(a){return this.a.x==a.x&&this.a.y==a.y||this.b.x==a.x&&this.b.y==a.y||this.c.x==a.x&&this.c.y==a.y},b.Triangle.prototype.sharesEdge=function(a){var b=0;return this.containsVertex(a.a)&&b++,this.containsVertex(a.b)&&b++,this.containsVertex(a.c)&&b++,2==b},b.Rectangle=function(a,b,c,d){this.update(a,b,c,d)},b.Rectangle.prototype.update=function(a,b,c,d){this.x=isNaN(a)?0:a,this.y=isNaN(b)?0:b,this.width=isNaN(c)?0:c,this.height=isNaN(d)?0:d},b.Rectangle.prototype.updateToRect=function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},b.Rectangle.prototype.scaleX=function(a){this.width*=a},b.Rectangle.prototype.scaleY=function(a){this.height*=a},b.Rectangle.prototype.scale=function(a){this.scaleX(a),this.scaleY(a)},b.Rectangle.prototype.getRight=function(){return this.x+this.width},b.Rectangle.prototype.getBottom=function(){return this.y+this.height},b.Rectangle.prototype.getCenterX=function(){return this.x+this.width/2},b.Rectangle.prototype.containsPoint=function(a,b){return a>=this.x&&b>=this.y&&a<=this.getRight()&&b<=this.getBottom()},b.Rectangle.prototype.containsRect=function(a){return this.containsPoint(a.x,a.y)&&this.containsPoint(a.getRight(),a.getBottom())},b.Rectangle.prototype.getCenter=function(){return new b.Point(this.x+this.width/2,this.y+this.height/2)},b.Rectangle.prototype.getCenterY=function(){return this.y+this.height/2},b.Rectangle.prototype.isSquare=function(){return this.width==this.height},b.Rectangle.prototype.isLandscape=function(){return this.width>this.height},b.Rectangle.prototype.isPortrait=function(){return this.width<this.height},b.Rectangle.prototype.getSmallerSide=function(){return Math.min(this.width,this.height)},b.Rectangle.prototype.getBiggerSide=function(){return Math.max(this.width,this.height)},b.Rectangle.prototype.getArea=function(){return this.width*this.height},b.Rectangle.prototype.floor=function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},b.Rectangle.prototype.ceil=function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},b.Rectangle.prototype.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height)},b.Rectangle.prototype.roundIn=function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},b.Rectangle.prototype.roundOut=function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},b.Rectangle.prototype.clone=function(){return new b.Rectangle(this.x,this.y,this.width,this.height)},b.Rectangle.prototype.toString=function(){return"Rectangle{x:"+this.x+" , y:"+this.y+" , width:"+this.width+" , height:"+this.height+"}"},b.RoundedRectangle=function(a,c,d,e,f){b.Rectangle.call(this,a,c,d,e),this.radius=isNaN(f)?5:f},b.RoundedRectangle.prototype=Object.create(b.Rectangle.prototype),b.RoundedRectangle.prototype.constructor=b.Rectangle,b.RoundedRectangle.prototype.drawPathToContext=function(a){a.beginPath(),a.moveTo(this.x,this.y+this.radius),a.arc(this.x+this.radius,this.y+this.radius,this.radius,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),a.lineTo(this.getRight()-this.radius,this.y),a.arc(this.getRight()-this.radius,this.y+this.radius,this.radius,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),a.lineTo(this.getRight(),this.getBottom()-this.radius),a.arc(this.getRight()-this.radius,this.getBottom()-this.radius,this.radius,0,BCHWMathUtil.HALF_PI),a.lineTo(this.x+this.radius,this.getBottom()),a.arc(this.x+this.radius,this.getBottom()-this.radius,this.radius,BCHWMathUtil.HALF_PI,Math.PI),a.lineTo(this.x,this.y+this.radius),a.closePath()},b.RoundedRectangle.prototype.toString=function(){return"RoundedRectangle{x:"+this.x+" , y:"+this.y+" , width:"+this.width+" , height:"+this.height+" , radius:"+this.radius+"}"},b.RoundedRectangle.prototype.clone=function(){return new b.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},b.RectangleUtil=function(){},b.RectangleUtil.getBiggerRectangle=function(a,b){return a.getArea()>b.getArea()?a:b},b.RectangleUtil.getSmallerRectangle=function(a,b){return a.getArea()<b.getArea()?a:b},b.RectangleUtil.isBiggerThan=function(a,b){return a.getArea()>b.getArea()},b.RectangleUtil.isBiggerThanOrEqual=function(a,b){return a.getArea()>=b.getArea()},b.RectangleUtil.isSmallerThan=function(a,b){return a.getArea()<b.getArea()},b.RectangleUtil.isSmallerThanOrEqual=function(a,b){return a.getArea()<=b.getArea()},b.RectangleUtil.isEqual=function(a,c){return b.RectangleUtil.hasEqualPosition(a,c)&&b.RectangleUtil.hasEqualSides(a,c)},b.RectangleUtil.hasEqualPosition=function(a,b){return a.x==b.x&&a.y==b.y},b.RectangleUtil.hasEqualSides=function(a,b){return a.width==b.width&&a.height==b.height},b.RectangleUtil.hasEqualArea=function(a,b){return a.getArea()==b.getArea()},b.RectangleUtil.getCenterX=function(a){return a.x+a.width/2},b.RectangleUtil.getCenterY=function(a){return a.y+a.height/2},b.RectangleUtil.createRandomXIn=function(a){return BCHWMathUtil.getRandomNumberInRange(a.x,a.getRight())},b.RectangleUtil.createRandomYIn=function(a){return BCHWMathUtil.getRandomNumberInRange(a.y,a.getBottom())},b.RectangleUtil.rectanglesIntersect=function(a,b){return a.containsPoint(b.x,b.y)||a.containsPoint(b.getRight(),b.y)||a.containsPoint(b.getRight(),b.getBottom())||a.containsPoint(b.x,b.getBottom())},b.RectangleUtil.getIntersectingRectangle=function(a,c){if(!b.RectangleUtil.rectanglesIntersect(a,c))return console.log("	no intersection found"),null;if(a.containsRect(c))return c;if(c.containsRect(a))return a;var d=Math.max(a.x,c.x),e=Math.max(a.y,c.y),f=Math.min(a.getRight(),c.getRight()),g=Math.min(a.getBottom(),c.getBottom());return new b.Rectangle(d,e,f-d,g-e)},b.RectangleUtil.createRandomRectangleIn=function(a){var c=Math.random()*a.width,d=Math.random()*a.height,e=Math.random()*(a.width-c),f=Math.random()*(a.height-d);return new b.Rectangle(a.x+e,a.y+f,c,d)},b.RectangleUtil.createRandomIntegerRectangleIn=function(a){var c=b.RectangleUtil.createRandomRectangleIn(a);return c.round(),c},b.RectangleUtil.horizontalAlignLeft=function(a,b){b.x=a.x},b.RectangleUtil.horizontalAlignMiddle=function(a,c){c.x=b.RectangleUtil.getCenterX(a)-c.width/2},b.RectangleUtil.horizontalAlignRight=function(a,b){b.x=a.getRight()-b.width},b.RectangleUtil.verticalAlignTop=function(a,b){b.y=a.y},b.RectangleUtil.verticalAlignMiddle=function(a,c){c.y=b.RectangleUtil.getCenterY(a)-c.height/2},b.RectangleUtil.verticalAlignBottom=function(a,b){b.y=a.getBottom()-b.height},b.RectangleUtil.scaleRectToPortraitFit=function(a,c){b.RectangleUtil.scaleRectToHeight(c,a.height)},b.RectangleUtil.scaleRectToLandscapeFit=function(a,c){b.RectangleUtil.scaleRectToWidth(c,a.width)},b.RectangleUtil.scaleRectToHeight=function(a,b){a.width*=b/a.height,a.height=b},b.RectangleUtil.scaleRectToWidth=function(a,b){a.height*=b/a.width,a.width=b},b.RectangleUtil.scaleRectToBestFit=function(a,c){var d=c.clone();b.RectangleUtil.scaleRectToPortraitFit(a,d),d.width>a.width?b.RectangleUtil.scaleRectToLandscapeFit(a,c):c.updateToRect(d)},b.RectangleUtil.scaleRectInto=function(a,c){b.RectangleUtil.scaleRectToBestFit(a,c),b.RectangleUtil.verticalAlignMiddle(a,c),b.RectangleUtil.horizontalAlignMiddle(a,c)},b.setIdentityMatrixToContext=function(a){a.setTransform(1,0,0,1,0,0)},b.Transform=function(a,b,c,d,e,f){this.update(isNaN(a)?1:a,isNaN(b)?0:b,isNaN(c)?0:c,isNaN(d)?1:d,isNaN(e)?0:e,isNaN(f)?0:f)},b.Transform.prototype.update=function(a,b,c,d,e,f){this.scaleX=a,this.skewX=b,this.skewY=c,this.scaleY=d,this.tx=e,this.ty=f},b.Transform.prototype.toString=function(){return"SimpleGeometry.Transform{scaleX:"+this.scaleX+" ,skewX:"+this.skewX+" ,skewY:"+this.skewY+" ,scaleY:"+this.scaleY+" ,tx:"+this.tx+" ,ty:"+this.ty+"}"},a.BCHWGeom=b}(window),function(a){UnitAnimator=function(a,b,c,d){this.easingFunction=UnitAnimator.easeLinear,this.reset(a,b,c,d)},UnitAnimator.easeLinear=function(a,b,c,d){return c*(a/d)+b},UnitAnimator.easeInSine=function(a,b,c,d){return-c*Math.cos(a/d*BCHWMathUtil.HALF_PI)+c+b},UnitAnimator.easeOutSine=function(a,b,c,d){return c*Math.sin(a/d*BCHWMathUtil.HALF_PI)+b},UnitAnimator.easeInOutSine=function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},UnitAnimator.easeInBounce=function(a,b,c,d){return c-UnitAnimator.easeOutBounce(d-a,0,c,d)+b},UnitAnimator.easeOutBounce=function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},UnitAnimator.easeInOutBounce=function(a,b,c,d){return d/2>a?.5*UnitAnimator.easeInBounce(2*a,0,c,d)+b:.5*UnitAnimator.easeOutBounce(2*a-d,0,c,d)+.5*c+b},UnitAnimator.easeInElastic=function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f))+b)},UnitAnimator.easeOutElastic=function(a,b,c,d,e,f){var g;return 0==a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)+c+b)},UnitAnimator.easeInOutElastic=function(a,b,c,d,e,f){var g;return 0==a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/BCHWMathUtil.PI2*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*BCHWMathUtil.PI2/f)*.5+c+b)},UnitAnimator.easingFunctions=[UnitAnimator.easeLinear,UnitAnimator.easeInSine,UnitAnimator.easeOutSine,UnitAnimator.easeInOutSine,UnitAnimator.easeInBounce,UnitAnimator.easeOutBounce,UnitAnimator.easeInOutBounce,UnitAnimator.easeInElastic,UnitAnimator.easeOutElastic,UnitAnimator.easeInOutElastic],UnitAnimator.getRandomEasingFunction=function(){return UnitAnimator.easingFunctions[Math.floor(Math.random()*UnitAnimator.easingFunctions.length)]},UnitAnimator.prototype.setRandomEasingFunction=function(){this.easingFunction=UnitAnimator.getRandomEasingFunction()},UnitAnimator.prototype.setEasingFunction=function(a){UnitAnimator.easingFunctions.indexOf(a)>-1&&(this.easingFunction=a)},UnitAnimator.prototype.getAnimationPercent=function(){return this.easingFunction(BCHWMathUtil.normalize(this.millisecondsAnimated,0,this.duration),0,1,1)},UnitAnimator.prototype.isAnimating=function(){return!isNaN(this.intervalId)},UnitAnimator.prototype.reset=function(a,b,c,d){this.duration=a,this.framerate=b,this.updateCallBack=c,this.completeCallBack=d,this.millisecondsAnimated=0},UnitAnimator.prototype.start=function(a){a&&this.setEasingFunction(a);var b=this;this.intervalId=setInterval(function(){b.update()},this.framerate)},UnitAnimator.prototype.pause=function(){isNaN(this.intervalId)||clearInterval(this.intervalId),delete this.intervalId},UnitAnimator.prototype.update=function(){return this.millisecondsAnimated+=this.framerate,this.millisecondsAnimated>=this.duration?(this.pause(),this.millisecondsAnimated=this.duration,this.dispatchUpdate(),this.dispatchComplete(),void 0):(this.dispatchUpdate(),void 0)},UnitAnimator.prototype.dispatchUpdate=function(){this.updateCallBack&&this.updateCallBack()},UnitAnimator.prototype.dispatchComplete=function(){this.completeCallBack&&this.completeCallBack()},a.UnitAnimator=UnitAnimator}(window),function(a){var b=function(){};b.shuffle=function(a){for(var b=[];a.length>0;){var c=a.splice(Math.floor(Math.random()*a.length),1);b.push(c[0])}return b},b.createSequentialNumericArray=function(a){for(var b=[],c=0;a>c;c++)b[c]=c;return b},a.BCHWArrayUtil=b}(window),function(a){var b=function(a,c,d,e,f){BCHWGeom.Rectangle.call(this,c,d,e,f),this.canvas=a,this.context=this.canvas.getContext("2d"),this.horizontalAlign=b.HORIZONTAL_ALIGN_MIDDLE};b.prototype=Object.create(BCHWGeom.Rectangle.prototype),b.prototype.constructor=BCHWGeom.Rectangle,b.VERTICAL_ALIGN_TOP="verticalAlignTop",b.VERTICAL_ALIGN_MIDDLE="verticalAlignMiddle",b.VERTICAL_ALIGN_BOTTOM="verticalAlignBottom",b.HORIZONTAL_ALIGN_LEFT="horizontalAlignLeft",b.HORIZONTAL_ALIGN_RIGHT="horizontalAlignRight",b.HORIZONTAL_ALIGN_MIDDLE="horizontalAlignMiddle",b.HORIZONTAL_ALIGN_JUSTIFY="horizontalAlignJustify",b.prototype.setVerticalAlign=function(a){switch(a){case b.VERTICAL_ALIGN_TOP:case b.VERTICAL_ALIGN_MIDDLE:case b.VERTICAL_ALIGN_BOTTOM:this.verticalAlign=a;break;default:this.verticalAlign=b.VERTICAL_ALIGN_MIDDLE}},b.prototype.setHorizontalAlign=function(a){switch(a){case b.HORIZONTAL_ALIGN_LEFT:case b.HORIZONTAL_ALIGN_RIGHT:case b.HORIZONTAL_ALIGN_MIDDLE:case b.HORIZONTAL_ALIGN_JUSTIFY:this.horizontalAlign=a;break;default:this.horizontalAlign=b.HORIZONTAL_ALIGN_MIDDLE}},b.prototype.clear=function(){this.context.clearRect(this.x,this.y,this.width,this.height)},a.LayoutRectangle=b}(window),function(a){var b=function(a,b,c,d,e){LayoutRectangle.call(this,a,b,c,d,e),this.characters=[]};b.prototype=Object.create(LayoutRectangle.prototype),b.prototype.constructor=LayoutRectangle,b.prototype.addCharacter=function(a){this.characters.push(a)},b.prototype.layoutCharacters=function(){this["layoutCharacters_"+this.horizontalAlign]()},b.prototype.getContentRect=function(a){var b,c,d=0;for(b=0;b<this.characters.length;b++)c=this.characters[b],d+=a*c.width;return new BCHWGeom.Rectangle(0,0,d,a)},b.prototype.layoutCharacters_horizontalAlignLeft=function(){var a,b,c,d=this.x+0;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.x=d,b.y=this.y,b.width=this.height*c.width,b.height=this.height,d+=b.width},b.prototype.layoutCharacters_horizontalAlignRight=function(){var a,b,c,d=this.getRight();for(a=this.characters.length-1;a>-1;a--)c=this.characters[a],b=c.roundedRect,b.width=this.height*c.width,b.x=d-b.width,b.y=this.y,b.height=this.height,d-=b.width},b.prototype.layoutCharacters_horizontalAlignMiddle=function(){var a,b,c,d=0;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.y=this.y,b.width=this.height*c.width,b.height=this.height,d+=b.width;var e=BCHWGeom.RectangleUtil.getCenterX(this)-d/2;for(a=0;a<this.characters.length;a++)c=this.characters[a],b=c.roundedRect,b.x=e,e+=b.width},b.prototype.layoutCharacters_horizontalAlignJustify=function(){console.log("layoutCharacters_horizontalAlignJustify() NOT IMPLENTED YET"),this.layoutCharacters_horizontalAlignLeft()},a.BCHWFontLayoutRect=b}(window),function(a){var b=function(){};b.RGBAColor=function(){this.red=0,this.green=0,this.blue=0,this.alpha=1},b.RGBAColor.prototype.toString=function(){return"RGBAColor{red:"+this.red+" , green:"+this.green+" , blue:"+this.blue+" , alpha:"+this.alpha+"}"},b.RGBAColor.prototype.getCanvasColorString=function(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},b.createRGBAColor=function(a,c,d,e){var f=new b.RGBAColor;return isNaN(a)||(f.red=BCHWMathUtil.clampRGB(a)),isNaN(c)||(f.green=BCHWMathUtil.clampRGB(c)),isNaN(d)||(f.blue=BCHWMathUtil.clampRGB(d)),isNaN(e)||(f.alpha=BCHWMathUtil.clamp(0,1,e)),f},b.BCHWColorsLib=function(){},b.BCHWColorsLib.ORANGE=b.createRGBAColor(246,160,37),b.BCHWColorsLib.GREEN=b.createRGBAColor(65,161,113),b.BCHWColorsLib.RED=b.createRGBAColor(157,11,14),b.BCHWColorsLib.PURPLE=b.createRGBAColor(217,135,139),b.BCHWColorsLib.TURQUOISE=b.createRGBAColor(116,193,178),b.BCHWColorsLib.LIGHT_BROWN=b.createRGBAColor(173,134,70),b.BCHWColorsLib.DARK_BROWN=b.createRGBAColor(91,62,0),b.BCHWColorsLib.BLACK=b.createRGBAColor(51,51,51),b.BCHWColorsLib.WHITE=b.createRGBAColor(255,255,255),b.BCHWColorsLib.DARK_GRAY=b.createRGBAColor(102,102,102),b.BCHWColorsLib.LIGHT_GRAY=b.createRGBAColor(219,203,191),b.BCHWColorsLib.fillPalette=[b.BCHWColorsLib.ORANGE,b.BCHWColorsLib.GREEN,b.BCHWColorsLib.RED,b.BCHWColorsLib.PURPLE],b.BCHWColorsLib.getRandomFillPaletteColor=function(){return b.BCHWColorsLib.fillPalette[Math.floor(Math.random()*b.BCHWColorsLib.fillPalette.length)]},b.BCHWColorsLib.getRandomFillPaletteColorString=function(){var a=b.BCHWColorsLib.fillPalette[Math.floor(Math.random()*b.BCHWColorsLib.fillPalette.length)];return a.getCanvasColorString()},b.BCHWColorsLib.getNextColor=function(a){var c=b.BCHWColorsLib.getRandomFillPaletteColor();return a==c?b.BCHWColorsLib.getNextColor(a):c},b.BCHWColorsLib.getNextColorString=function(a){var c=b.BCHWColorsLib.getNextColor(a);return c.getCanvasColorString()},a.BCHWColor=b}(window),function(a){var b=function(){this.width=1,this.color=new BCHWColor.createRGBAColor,this.thickness=1,this.roundedRect};b.prototype.renderFunction=function(){},b.prototype.renderToContext=function(a){this.renderFunction(a,this)},b.prototype.addRandomness=function(a,b){this.roundedRect.x+=BCHWMathUtil.getRandomNumberInRange(-a,a),this.roundedRect.y+=BCHWMathUtil.getRandomNumberInRange(-a,a),this.roundedRect.scaleX(1+BCHWMathUtil.getRandomNumberInRange(-b,b)),this.roundedRect.scaleY(1+BCHWMathUtil.getRandomNumberInRange(-b,b))},b.createBCHWFontCharacter=function(a,c,d,e,f){var g=new b;g.color=c,g.lineColor=d,g.thickness=e,g.roundedRect=f;var h=BCHWFontCharacterRenderer.getRenderFunction(a);return h&&(g.renderFunction=h),g.width=BCHWFontCharacterRenderer.getCharacterWidthPercent(a),g},a.BCHWFontCharacter=b}(window),function(a){var b=function(){};b.renderRoundedRectToContext=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString(),a.moveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.lineTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.height-b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.height,b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.lineTo(b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.height,b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.height-b.roundedRect.radius),a.lineTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y,b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y),a.lineTo(b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y,b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.fill(),a.stroke()},b.getRenderFunction=function(a){if(!a||void 0==a)return null;switch(a.toLowerCase()){case"b":case"c":case"e":case"f":case"g":case"h":case"i":case"m":case"o":case"r":case"s":case"t":case"u":case"w":case"y":return b["render"+a.toUpperCase()]}return null},b.getCharacterWidthPercent=function(a){var b=1;if(!a||void 0==a)return b;switch(a.toLowerCase()){case"b":b=1;break;case"c":b=.9;break;case"e":b=.8;break;case"f":b=.8;break;case"g":b=.9;break;case"h":b=.9;break;case"i":b=.5;break;case"m":b=1.2;break;case"o":b=.9;break;case"r":b=1;break;case"s":b=.8;break;case"t":b=1;break;case"u":b=.9;break;case"w":b=1.2;break;case"y":b=1}return b},b.renderB=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2;a.moveTo(d,e),a.lineTo(d-c.roundedRect.width/4,e);var f=c.roundedRect.height/4;a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+f),a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+3*f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+3*f),a.stroke()},b.renderC=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2,f=c.roundedRect.x+c.roundedRect.width/2;a.moveTo(d,e),a.lineTo(f,e);var g=c.roundedRect.height/4;a.moveTo(f,c.roundedRect.y+g),a.lineTo(f,c.roundedRect.y+3*g),a.stroke()},b.renderE=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.width/4,f=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+f),a.lineTo(d-e,c.roundedRect.y+f),a.moveTo(d,c.roundedRect.y+2*f),a.lineTo(d-e,c.roundedRect.y+2*f),a.stroke()},b.renderF=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect.width/3,d=b.roundedRect.height/3,e=b.roundedRect.x+b.roundedRect.width,f=b.roundedRect.y+b.roundedRect.height;a.moveTo(b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.lineTo(b.roundedRect.x,f-b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x,f,b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y+b.roundedRect.height),a.lineTo(b.roundedRect.x+2*c-b.roundedRect.radius,f),a.quadraticCurveTo(b.roundedRect.x+2*c,f,b.roundedRect.x+2*c,f-b.roundedRect.radius),a.lineTo(b.roundedRect.x+2*c,f-d),a.lineTo(e-b.roundedRect.radius,f-d),a.quadraticCurveTo(e,f-d,e,f-d-b.roundedRect.radius),a.lineTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y+b.roundedRect.radius),a.quadraticCurveTo(b.roundedRect.x+b.roundedRect.width,b.roundedRect.y,b.roundedRect.x+b.roundedRect.width-b.roundedRect.radius,b.roundedRect.y),a.lineTo(b.roundedRect.x+b.roundedRect.radius,b.roundedRect.y),a.quadraticCurveTo(b.roundedRect.x,b.roundedRect.y,b.roundedRect.x,b.roundedRect.y+b.roundedRect.radius),a.fill(),a.stroke(),a.beginPath(),a.lineWidth=b.thickness,a.strokeStyle=b.lineColor.getCanvasColorString(),a.moveTo(e,b.roundedRect.y+d),a.lineTo(e-c,b.roundedRect.y+d),a.stroke()},b.renderG=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.x+c.roundedRect.width/2,f=c.roundedRect.y+c.roundedRect.height/1.8,g=c.roundedRect.width/4,h=c.roundedRect.height/4;a.moveTo(d,f),a.lineTo(e,f),a.lineTo(e,f+h),a.lineTo(e+g,f+h),a.stroke()},b.renderH=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/4;a.moveTo(d,c.roundedRect.y),a.lineTo(d,c.roundedRect.y+e),a.moveTo(d,c.roundedRect.y+c.roundedRect.height),a.lineTo(d,c.roundedRect.y+c.roundedRect.height-e),a.stroke()},b.renderI=function(a,c){b.renderRoundedRectToContext(a,c)},b.renderM=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.height/3,e=c.roundedRect.width/3;a.moveTo(c.roundedRect.x+e,c.roundedRect.getBottom()),a.lineTo(c.roundedRect.x+e,c.roundedRect.getBottom()-d),a.moveTo(c.roundedRect.x+2*e,c.roundedRect.getBottom()),a.lineTo(c.roundedRect.x+2*e,c.roundedRect.getBottom()-d),a.stroke()},b.renderO=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+e),a.lineTo(d,c.roundedRect.y+2*e),a.stroke()},b.renderR=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.y+c.roundedRect.height/2;a.moveTo(d,e),a.lineTo(d-c.roundedRect.width/4,e);var f=c.roundedRect.height/4;a.moveTo(c.roundedRect.x+c.roundedRect.width/2,c.roundedRect.y+f),a.lineTo(c.roundedRect.x+c.roundedRect.width/2+c.roundedRect.width/4,c.roundedRect.y+f);var g=c.roundedRect.x+c.roundedRect.width/2;a.moveTo(g,c.roundedRect.getBottom()-f),a.lineTo(g,c.roundedRect.getBottom()),a.stroke()},b.renderS=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width,e=c.roundedRect.width/3,f=c.roundedRect.height/3;a.moveTo(d,c.roundedRect.y+f),a.lineTo(d-e,c.roundedRect.y+f),a.moveTo(c.roundedRect.x,c.roundedRect.y+2*f),a.lineTo(c.roundedRect.x+e,c.roundedRect.y+2*f),a.stroke()},b.renderT=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect,d=b.roundedRect.radius,e=c.width/3,f=c.height/3,g=c.x+c.width,h=c.y+c.height;a.moveTo(c.x,c.y+d),a.lineTo(c.x,h-f-d),a.quadraticCurveTo(c.x,h-f,c.x+d,h-f),a.lineTo(c.x+e-d,h-f),a.quadraticCurveTo(c.x+e,h-f,c.x+e,h-f+d),a.lineTo(c.x+e,h-d),a.quadraticCurveTo(c.x+e,h,c.x+e+d,h),a.lineTo(c.x+2*e-d,h),a.quadraticCurveTo(c.x+2*e,h,c.x+2*e,h-d),a.lineTo(c.x+2*e,h-f+d),a.quadraticCurveTo(c.x+2*e,h-f,c.x+2*e+d,h-f),a.lineTo(g-d,h-f),a.quadraticCurveTo(g,h-f,g,h-f-d),a.lineTo(g,c.y+d),a.quadraticCurveTo(g,c.y,g-d,c.y),a.lineTo(c.x+d,c.y),a.quadraticCurveTo(c.x,c.y,c.x,c.y+d),a.fill(),a.stroke()},b.renderU=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.x+c.roundedRect.width/2,e=c.roundedRect.height/4;
a.moveTo(d,c.roundedRect.y),a.lineTo(d,c.roundedRect.y+e),a.stroke()},b.renderW=function(a,c){b.renderRoundedRectToContext(a,c),a.beginPath(),a.lineWidth=c.thickness,a.strokeStyle=c.lineColor.getCanvasColorString();var d=c.roundedRect.height/3,e=c.roundedRect.width/3;a.moveTo(c.roundedRect.x+e,c.roundedRect.y),a.lineTo(c.roundedRect.x+e,c.roundedRect.y+d),a.moveTo(c.roundedRect.x+2*e,c.roundedRect.y),a.lineTo(c.roundedRect.x+2*e,c.roundedRect.y+d),a.stroke()},b.renderY=function(a,b){a.beginPath(),a.lineWidth=b.thickness,a.fillStyle=b.color.getCanvasColorString(),a.strokeStyle=b.lineColor.getCanvasColorString();var c=b.roundedRect,d=b.roundedRect.radius,e=c.width/3,f=c.height/3,g=c.x+c.width,h=c.y+c.height;a.moveTo(c.x,c.y+d),a.lineTo(c.x,h-f-d),a.quadraticCurveTo(c.x,h-f,c.x+d,h-f),a.lineTo(c.x+e-d,h-f),a.quadraticCurveTo(c.x+e,h-f,c.x+e,h-f+d),a.lineTo(c.x+e,h-d),a.quadraticCurveTo(c.x+e,h,c.x+e+d,h),a.lineTo(c.x+2*e-d,h),a.quadraticCurveTo(c.x+2*e,h,c.x+2*e,h-d),a.lineTo(c.x+2*e,h-f+d),a.quadraticCurveTo(c.x+2*e,h-f,c.x+2*e+d,h-f),a.lineTo(g-d,h-f),a.quadraticCurveTo(g,h-f,g,h-f-d),a.lineTo(g,c.y+d),a.quadraticCurveTo(g,c.y,g-d,c.y),a.lineTo(c.x+d,c.y),a.quadraticCurveTo(c.x,c.y,c.x,c.y+d),a.fill(),a.stroke(),a.beginPath(),a.lineWidth=b.thickness,a.strokeStyle=b.lineColor.getCanvasColorString();var i=c.x+c.width/2,j=c.height/4;a.moveTo(i,c.y),a.lineTo(i,c.y+j),a.stroke()},a.BCHWFontCharacterRenderer=b}(window),function(a){var b=function(a,b,c,d,e){LayoutRectangle.call(this,a,b,c,d,e),this.lineThickness=4,this.row1=new BCHWFontLayoutRect(a),this.row1.setHorizontalAlign(LayoutRectangle.HORIZONTAL_ALIGN_RIGHT),this.setRowText(this.row1,"big city"),this.row2=new BCHWFontLayoutRect(a),this.setRowText(this.row2,"house wife"),this.renderNextCharacterTimeoutId=-1};b.prototype=Object.create(LayoutRectangle.prototype),b.prototype.constructor=LayoutRectangle,b.RENDER_CHARACTER_INTERVAL=30,b.prototype.setRowText=function(a,b){var c,d,e,f,g=BCHWColor.BCHWColorsLib.WHITE;for(e=0;e<b.length;e++)c=b.charAt(e),d=BCHWColor.BCHWColorsLib.getNextColor(d),f=BCHWFontCharacter.createBCHWFontCharacter(c,d,g,this.lineThickness,new BCHWGeom.RoundedRectangle)," "==c&&(f.width=.5),a.addCharacter(f)},b.prototype.render=function(a,b){this.updateLayout(a),this.clear(),this.zIndeces=BCHWArrayUtil.createSequentialNumericArray(this.allCharacters.length),this.zIndeces=BCHWArrayUtil.shuffle(this.zIndeces),this.currentRenderIndex=0;for(var c=this.row1.height/12,d=0;d<this.allCharacters.length;d++)this.allCharacters[d].thickness=b,this.allCharacters[d].roundedRect.radius=c;this.renderNextCharacter()},b.prototype.stop=function(){clearTimeout(this.renderNextCharacterTimeoutId)},b.prototype.renderNextCharacter=function(){if(this.currentRenderIndex!=this.allCharacters.length){var a=this.allCharacters[this.zIndeces[this.currentRenderIndex]];a.addRandomness(this.row1.height/40,.01),a.renderToContext(this.context);var c=this;this.renderNextCharacterTimeoutId=setTimeout(function(){c.renderNextCharacter()},b.RENDER_CHARACTER_INTERVAL),this.currentRenderIndex++}},b.prototype.getContentRect=function(a){var b=BCHWGeom.RectangleUtil.getBiggerRectangle(this.row1.getContentRect(100),this.row2.getContentRect(100));return BCHWGeom.RectangleUtil.scaleRectToBestFit(a,b),b},b.prototype.updateLayout=function(a){var b=BCHWGeom.RectangleUtil.getBiggerRectangle(this.row1.getContentRect(100),this.row2.getContentRect(100));BCHWGeom.RectangleUtil.scaleRectToBestFit(a,b),BCHWGeom.RectangleUtil.horizontalAlignMiddle(a,b),b.y=a.getBottom()-b.height,this.row2.updateToRect(b),this.row2.layoutCharacters(),b.y-=b.height,this.row1.updateToRect(b),this.row1.layoutCharacters(),this.allCharacters=this.row1.characters.concat(this.row2.characters)},b.prototype.getCharacterBounds=function(a,b){var c=this["row"+a],d=c.characters[b];return d.roundedRect},a.BCHWLogo=b}(window),function(a){var b=function(a,b,c,d,e){LayoutRectangle.call(this,a,b,c,d,e),this.lineThickness=4};b.prototype=Object.create(LayoutRectangle.prototype),b.prototype.constructor=LayoutRectangle,b.prototype.render=function(a){this.updateLayout(a),this.clear()},b.prototype.stop=function(){},b.prototype.renderRect=function(a){this.context.fillRect(a.x,a.y,a.width,a.height),this.context.strokeRect(a.x,a.y,a.width,a.height)},b.prototype.renderRoundedRect=function(a,b,c){this.context.beginPath(),this.context.moveTo(a.x,a.y+a.radius),this.context.arc(a.x+a.radius,a.y+a.radius,a.radius,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),this.context.lineTo(a.getRight()-a.radius,a.y),this.context.arc(a.getRight()-a.radius,a.y+a.radius,a.radius,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),this.context.lineTo(a.getRight(),a.getBottom()-a.radius),this.context.arc(a.getRight()-a.radius,a.getBottom()-a.radius,a.radius,0,BCHWMathUtil.HALF_PI),this.context.lineTo(a.x+a.radius,a.getBottom()),this.context.arc(a.x+a.radius,a.getBottom()-a.radius,a.radius,BCHWMathUtil.HALF_PI,Math.PI),this.context.lineTo(a.x,a.y+a.radius),b||this.context.fill(),c||this.context.stroke(),this.context.closePath()},b.prototype.renderEyes=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.eyeRectRight=new BCHWGeom.Rectangle(this.faceRect.x+this.faceRect.width/7,this.faceRect.y+this.faceRect.height/4,this.faceRect.width/4.2,this.faceRect.height/5),this.context.lineWidth=1,this.context.strokeStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString(),this.renderRect(this.eyeRectRight),this.eyeRectLeft=new BCHWGeom.Rectangle(this.faceRect.x+this.faceRect.width-this.faceRect.width/7-this.eyeRectRight.width,this.eyeRectRight.y,this.eyeRectRight.width,this.eyeRectRight.height),this.renderRect(this.eyeRectLeft),this.context.lineWidth=0,this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString(),this.pupilRect=new BCHWGeom.Rectangle(0,0,.6*this.eyeRectRight.width,this.eyeRectRight.height);var a=this.eyeRectRight.height/2,b=this.eyeRectRight.width/2,c=Math.random()*a*(Math.random()>.5?1:-1),d=Math.random()*b*(Math.random()>.5?1:-1),e=new BCHWGeom.Rectangle(0,0,this.pupilRect.width,this.pupilRect.height);e.x=this.eyeRectRight.getCenterX()-this.pupilRect.getCenterX()-d,e.y=this.eyeRectRight.getCenterY()-this.pupilRect.getCenterY()-c;var f=BCHWGeom.RectangleUtil.getIntersectingRectangle(this.eyeRectRight,e);this.renderRect(f);var g=new BCHWGeom.Rectangle(0,0,this.pupilRect.width,this.pupilRect.height);g.x=this.eyeRectLeft.getCenterX()-this.pupilRect.getCenterX()-d,g.y=this.eyeRectLeft.getCenterY()-this.pupilRect.getCenterY()-c,f=BCHWGeom.RectangleUtil.getIntersectingRectangle(this.eyeRectLeft,g),this.renderRect(f),this.context.strokeStyle=BCHWColor.BCHWColorsLib.BLACK.getCanvasColorString(),this.context.lineWidth=2},a.BCHWCharacter=b;var c=function(a,c,d,e,f){b.call(this,a,c,d,e,f);var g=BCHWColor.BCHWColorsLib.getRandomFillPaletteColor();this.shirtFillStyle=g.getCanvasColorString(),this.pantsFillStyle=BCHWColor.BCHWColorsLib.getNextColorString(g),this.name="mom",this.twitterHandle="B_C_H_W"};c.prototype=Object.create(b.prototype),c.prototype.constructor=b,c.prototype.render=function(a,b){this.updateToRect(a),this.clear(),this.lineThickness=b,this.context.lineWidth=this.lineThickness,this.context.strokeStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderHead(),this.renderBody(),this.renderArms(),this.renderMouth(),this.renderEyes(),this.renderEyeLashes()},c.prototype.stop=function(){},c.prototype.renderHead=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_GRAY.getCanvasColorString();var a=.35*this.height;this.cornerRadius=a/7,this.hairRect=new BCHWGeom.RoundedRectangle(this.x,this.y,this.width,a,this.cornerRadius),this.renderRoundedRect(this.hairRect),this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.faceRect=new BCHWGeom.RoundedRectangle(this.x+this.width/4,this.hairRect.y+this.hairRect.height/3,this.width/2,.3*this.height,this.cornerRadius),this.renderRoundedRect(this.faceRect)},c.prototype.renderBody=function(){this.context.fillStyle=this.shirtFillStyle,this.bodyRect=new BCHWGeom.RoundedRectangle(0,this.faceRect.getBottom(),.95*this.faceRect.width,.7*(this.getBottom()-this.faceRect.getBottom()),this.cornerRadius+1),this.bodyRect.x=this.faceRect.x+this.faceRect.width/2-this.bodyRect.width/2,this.renderRoundedRect(this.bodyRect),this.context.fillStyle=this.pantsFillStyle,this.pantsRect=new BCHWGeom.RoundedRectangle(this.faceRect.x,this.bodyRect.getBottom()-this.faceRect.radius,this.faceRect.width,.95*(this.getBottom()-this.bodyRect.getBottom()),this.cornerRadius),this.renderRoundedRect(this.pantsRect),this.context.lineWidth=0,this.shoeRect=new BCHWGeom.RoundedRectangle(this.pantsRect.x,this.pantsRect.getBottom(),this.pantsRect.width/2,this.getBottom()-this.pantsRect.getBottom(),this.cornerRadius/2),this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderRoundedRect(this.shoeRect),this.shoeRect.x=this.pantsRect.x+this.pantsRect.width/2,this.renderRoundedRect(this.shoeRect),this.context.lineWidth=this.lineThickness},c.prototype.renderArms=function(){var a=this.bodyRect.y+this.bodyRect.height/5,b=(this.bodyRect.x-this.hairRect.x)/3;this.context.beginPath(),this.context.moveTo(this.bodyRect.x,a),this.context.lineTo(this.bodyRect.x-b-Math.random()*b,a+Math.random()*(this.bodyRect.height/5)),this.context.lineTo(this.bodyRect.x,this.bodyRect.getBottom()-this.bodyRect.height/5-Math.random()*(this.bodyRect.height/5)),this.context.closePath(),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.bodyRect.getRight(),a),this.context.lineTo(this.bodyRect.getRight()+b+Math.random()*b,a+Math.random()*(this.bodyRect.height/5)),this.context.lineTo(this.bodyRect.getRight(),this.bodyRect.getBottom()-this.bodyRect.height/5-Math.random()*(this.bodyRect.height/5)),this.context.closePath(),this.context.stroke()},c.mouthFunctions=["renderTriangleMouth","renderSmileMouth","renderFrownMouth","renderOpenMouth"],c.prototype.renderMouth=function(){this[c.mouthFunctions[Math.floor(Math.random()*c.mouthFunctions.length)]]()},c.prototype.renderTriangleMouth=function(){this.context.beginPath();var a=(this.faceRect.getBottom()-this.hairRect.getBottom())/3,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2,this.context.moveTo(b.x,b.y),this.context.lineTo(b.getRight(),b.y+b.height/2),this.context.lineTo(b.x,b.getBottom()),this.context.lineTo(b.x,b.y),this.context.closePath(),this.context.stroke()},c.prototype.renderSmileMouth=function(){this.context.beginPath();var a=(this.faceRect.getBottom()-this.hairRect.getBottom())/3,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2;var c=b.y+Math.random()*(b.height/2),d=b.y+Math.random()*(b.height/2),e=new BCHWGeom.Point(b.x+.25*b.width+Math.random()*(b.width/2),b.getBottom()+Math.random()*(b.height/2)),f=new BCHWGeom.Point(e.x,e.y+10+Math.random()*(b.height/2));this.context.moveTo(b.x,c),this.context.quadraticCurveTo(e.x,e.y,b.getRight(),d),this.context.quadraticCurveTo(f.x,f.y,b.x,c),this.context.closePath(),this.context.stroke()},c.prototype.renderFrownMouth=function(){this.context.beginPath();var a=(this.faceRect.getBottom()-this.hairRect.getBottom())/3,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2,this.context.moveTo(b.x,b.y+Math.random()*b.height),this.context.lineTo(b.x+.25*b.width,b.y+Math.random()*b.height),this.context.lineTo(b.getRight(),b.y+Math.random()*b.height),this.context.stroke()},c.prototype.renderOpenMouth=function(){this.context.beginPath();var a=(this.faceRect.getBottom()-this.hairRect.getBottom())/3,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.hairRect.getBottom(),this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2,this.context.arc(b.getCenterX(),b.getCenterY(),b.height/2,0,BCHWMathUtil.PI2),this.context.closePath(),this.context.stroke()},c.prototype.renderEyeLashes=function(){this.context.beginPath(),this.context.moveTo(this.faceRect.x-this.eyeRectRight.width,this.faceRect.y),this.context.lineTo(this.faceRect.x-this.eyeRectRight.width/2,this.eyeRectRight.y),this.context.lineTo(this.eyeRectRight.x,this.eyeRectRight.y),this.context.stroke(),this.context.moveTo(this.faceRect.x-this.eyeRectRight.width/2,this.faceRect.y),this.context.lineTo(this.faceRect.x,this.eyeRectRight.y),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.faceRect.getRight()+this.eyeRectRight.width,this.faceRect.y),this.context.lineTo(this.faceRect.getRight()+this.eyeRectRight.width/2,this.eyeRectRight.y),this.context.lineTo(this.eyeRectLeft.getRight(),this.eyeRectRight.y),this.context.stroke(),this.context.moveTo(this.faceRect.getRight()+this.eyeRectRight.width/2,this.faceRect.y),this.context.lineTo(this.faceRect.getRight(),this.eyeRectRight.y),this.context.stroke()},a.BCHWMom=c;var d=function(a,c,d,e,f){b.call(this,a,c,d,e,f);var g=BCHWColor.BCHWColorsLib.getRandomFillPaletteColor();this.shirtFillStyle=g.getCanvasColorString(),this.pantsFillStyle=BCHWColor.BCHWColorsLib.getNextColorString(g),this.name="girl",this.twitterHandle="bchw_girl"};d.prototype=Object.create(b.prototype),d.prototype.constructor=b,d.prototype.render=function(a,b){this.updateToRect(a),this.clear(),this.lineThickness=b,this.context.lineWidth=this.lineThickness,this.context.strokeStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderHead(),this.renderBody(),this.renderMouth(),this.renderEyes()},d.prototype.stop=function(){},d.prototype.renderHead=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_GRAY.getCanvasColorString(),this.hairRect=new BCHWGeom.Rectangle(this.x,this.y,this.width,this.height/5);var a=new BCHWGeom.Rectangle(this.hairRect.x,this.hairRect.y,this.hairRect.width/5,this.hairRect.height),b=.8*a.width,c=.8*a.height,d=new BCHWGeom.Rectangle(this.hairRect.getRight()-b,this.hairRect.getBottom()-c,b,c),e=this.hairRect.height/2,f=d.width/5;this.context.beginPath(),this.context.moveTo(this.hairRect.x,this.hairRect.y+f),this.context.arc(this.hairRect.x+f,this.hairRect.y+f,f,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),this.context.lineTo(a.getRight()-f,this.hairRect.y),this.context.arc(a.getRight()-f,this.hairRect.y+f,f,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),this.context.lineTo(a.getRight(),this.hairRect.y+e),this.context.lineTo(d.x,this.hairRect.y+e),this.context.lineTo(d.x,d.y+f),this.context.arc(d.x+f,d.y+f,f,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),this.context.lineTo(d.getRight()-f,d.y),this.context.arc(d.getRight()-f,d.y+f,f,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),this.context.lineTo(d.getRight(),this.hairRect.getBottom()-f),this.context.arc(this.hairRect.getRight()-f,this.hairRect.getBottom()-f,f,0,BCHWMathUtil.HALF_PI),this.context.lineTo(this.hairRect.x+f,this.hairRect.getBottom()),this.context.arc(this.hairRect.x+f,this.hairRect.getBottom()-f,f,BCHWMathUtil.HALF_PI,Math.PI),this.context.closePath(),this.context.fill(),this.context.stroke(),this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.context.lineWidth=0;var g=.4*(this.height-this.hairRect.height);this.cornerRadius=g/6,this.faceRect=new BCHWGeom.RoundedRectangle(this.x+.15*this.width,this.hairRect.getBottom(),.7*this.width,g,this.cornerRadius),this.renderRoundedRect(this.faceRect),this.context.lineWidth=this.lineThickness},d.prototype.renderBody=function(){this.context.fillStyle=this.shirtFillStyle,this.bodyRect=new BCHWGeom.RoundedRectangle(0,this.faceRect.getBottom(),.95*this.faceRect.width,.7*(this.getBottom()-this.faceRect.getBottom()),.8*this.cornerRadius),this.bodyRect.x=this.faceRect.x+this.faceRect.width/2-this.bodyRect.width/2,this.renderRoundedRect(this.bodyRect),this.context.fillStyle=this.pantsFillStyle,this.pantsRect=new BCHWGeom.RoundedRectangle(this.faceRect.x,this.bodyRect.getBottom(),this.faceRect.width,this.getBottom()-this.bodyRect.getBottom(),.8*this.cornerRadius),this.renderRoundedRect(this.pantsRect),this.context.moveTo(this.pantsRect.getCenterX(),this.getBottom()-this.lineThickness),this.context.lineTo(this.pantsRect.getCenterX(),this.pantsRect.y+.2*this.pantsRect.height),this.context.stroke()},d.prototype.renderMouth=function(){this.context.beginPath();var a=.15*this.faceRect.height,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.faceRect.y+.7*this.faceRect.height,this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.RED.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2,this.context.moveTo(b.x,b.y+Math.random()*b.height),this.context.lineTo(b.x+.25*b.width,b.y+Math.random()*b.height),this.context.lineTo(b.getRight(),b.y+Math.random()*b.height),this.context.stroke()},a.BCHWGirl=d;var e=function(a,c,d,e,f){b.call(this,a,c,d,e,f);var g=BCHWColor.BCHWColorsLib.getRandomFillPaletteColor();this.shirtFillStyle=g.getCanvasColorString(),this.pantsFillStyle=BCHWColor.BCHWColorsLib.getNextColorString(g),this.name="boy",this.twitterHandle="bchw_son"};e.prototype=Object.create(b.prototype),e.prototype.constructor=b,e.prototype.render=function(a,b){this.updateToRect(a),this.clear(),this.lineThickness=b,this.context.lineWidth=this.lineThickness,this.context.strokeStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderHead(),this.renderBody(),this.renderMouth(),this.renderEyes()},e.prototype.stop=function(){},e.prototype.renderHead=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.LIGHT_GRAY.getCanvasColorString(),this.hairRect=new BCHWGeom.Rectangle(this.x,this.y,this.width,this.height/5);var a=this.hairRect.height/2,b=new BCHWGeom.RoundedRectangle(this.hairRect.x,this.hairRect.getCenterY(),this.hairRect.width,a,a/3);this.renderRoundedRect(b);var c=b.height/2,d=this.hairRect.x+.7*this.hairRect.width,e=this.hairRect.y+c+this.lineThickness;this.context.moveTo(d,e),this.context.arc(d,e,c,0,BCHWMathUtil.PI2);var f=.8*c,g=this.hairRect.x+.6*this.hairRect.width,h=b.y-f+this.lineThickness;this.context.moveTo(g,h),this.context.arc(g,h,f,0,BCHWMathUtil.PI2),this.context.stroke(),this.context.arc(d,e,c-this.lineThickness/2,0,BCHWMathUtil.PI2),this.context.arc(g,h,f-this.lineThickness/2,0,BCHWMathUtil.PI2),this.context.fill(),this.context.beginPath(),this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),h=this.hairRect.getBottom(),this.context.moveTo(g,h),this.context.arc(g,h,c,0,BCHWMathUtil.PI2),this.context.fill(),this.context.lineWidth=0;var i=.4*(this.height-this.hairRect.height);this.cornerRadius=i/6,this.faceRect=new BCHWGeom.RoundedRectangle(this.x+.05*this.width,this.hairRect.getBottom(),.9*this.width,i,this.cornerRadius),this.renderRoundedRect(this.faceRect),this.context.lineWidth=this.lineThickness},e.prototype.renderBody=function(){this.context.fillStyle=this.shirtFillStyle,this.bodyRect=new BCHWGeom.RoundedRectangle(0,this.faceRect.getBottom(),.95*this.faceRect.width,.7*(this.getBottom()-this.faceRect.getBottom()),this.cornerRadius),this.bodyRect.x=this.faceRect.x+this.faceRect.width/2-this.bodyRect.width/2,this.renderRoundedRect(this.bodyRect),this.context.fillStyle=this.pantsFillStyle,this.pantsRect=new BCHWGeom.RoundedRectangle(this.faceRect.x,this.bodyRect.getBottom(),this.faceRect.width,this.getBottom()-this.bodyRect.getBottom(),.8*this.cornerRadius),this.renderRoundedRect(this.pantsRect),this.context.moveTo(this.pantsRect.getCenterX(),this.getBottom()-this.lineThickness),this.context.lineTo(this.pantsRect.getCenterX(),this.pantsRect.y+.2*this.pantsRect.height),this.context.stroke()},e.prototype.renderMouth=function(){this.context.beginPath();var a=.15*this.faceRect.height,b=new BCHWGeom.RoundedRectangle(this.faceRect.x+this.faceRect.width/3,this.faceRect.y+.7*this.faceRect.height,this.faceRect.width/3,a+Math.random()*a);this.context.strokeStyle=BCHWColor.BCHWColorsLib.LIGHT_BROWN.getCanvasColorString(),this.context.lineWidth=this.lineThickness/2,this.context.moveTo(b.x,b.y+Math.random()*b.height),this.context.lineTo(b.x+.25*b.width,b.y+Math.random()*b.height),this.context.lineTo(b.getRight(),b.y+Math.random()*b.height),this.context.stroke()},a.BCHWBoy=e;var f=function(a,c,d,e,f){b.call(this,a,c,d,e,f);var g=BCHWColor.BCHWColorsLib.getRandomFillPaletteColor();this.shirtFillStyle=g.getCanvasColorString(),this.couchFillStyle=BCHWColor.BCHWColorsLib.getNextColorString(g),this.name="dad",this.twitterHandle="bchw_dad"};f.prototype=Object.create(b.prototype),f.prototype.constructor=b,f.prototype.render=function(a,b){this.updateToRect(a),this.clear(),this.lineThickness=b,this.context.lineWidth=this.lineThickness,this.context.strokeStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderCouch(),this.renderBody(),this.renderHead(),this.renderMouth()},f.prototype.stop=function(){},f.prototype.renderCouch=function(){this.context.fillStyle=this.couchFillStyle;var a=.6*this.height;this.couchRect=new BCHWGeom.RoundedRectangle(this.x+.4*this.width,this.y+.4*this.height,.6*this.width,a,a/18),this.renderRoundedRect(this.couchRect)},f.prototype.renderBody=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.LIGHT_GRAY.getCanvasColorString(),this.laptopRect=new BCHWGeom.RoundedRectangle(0,0,.25*this.width,.05*this.width,2),this.context.save(),this.context.translate(this.x,this.getCenterY()),this.context.rotate(.2*Math.PI),this.renderRoundedRect(this.laptopRect),this.context.restore(),this.context.fillStyle=this.shirtFillStyle,this.bodyRect=new BCHWGeom.Rectangle(this.x+.25*this.width,this.couchRect.y,.6*this.width,this.couchRect.height);var a=this.couchRect.height/20;this.context.beginPath(),this.context.moveTo(this.bodyRect.x,this.bodyRect.y+a),this.context.arc(this.bodyRect.x+a,this.bodyRect.y+a,a,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),this.context.lineTo(this.bodyRect.getRight()-a,this.bodyRect.y),this.context.arc(this.bodyRect.getRight()-a,this.bodyRect.y+a,a,Math.PI+BCHWMathUtil.HALF_PI,0),this.context.lineTo(this.bodyRect.getRight(),this.bodyRect.getCenterY()),this.context.lineTo(this.bodyRect.getCenterX()+a,this.bodyRect.getCenterY()),this.context.arc(this.bodyRect.getCenterX()+a,this.bodyRect.getCenterY()+a,a,Math.PI+BCHWMathUtil.HALF_PI,Math.PI,!0),this.context.lineTo(this.bodyRect.getCenterX(),this.bodyRect.getBottom()-a),this.context.arc(this.bodyRect.getCenterX()-a,this.bodyRect.getBottom()-a,a,0,BCHWMathUtil.HALF_PI),this.context.lineTo(this.bodyRect.x+a,this.bodyRect.getBottom()),this.context.arc(this.bodyRect.x+a,this.bodyRect.getBottom()-a,a,BCHWMathUtil.HALF_PI,Math.PI),this.context.closePath(),this.context.fill(),this.context.stroke();var b=.1*this.bodyRect.height,c=new BCHWGeom.RoundedRectangle(this.bodyRect.x,this.bodyRect.getBottom()-.1*this.bodyRect.height,this.bodyRect.width/2,b,b/3);this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.renderRoundedRect(c,!1,!0),this.context.beginPath();var d=this.bodyRect.getCenterX(),e=this.bodyRect.y+.25*this.bodyRect.height,f=this.x+.1*this.bodyRect.width+.2*Math.random()*this.bodyRect.width,g=this.bodyRect.y+.25*Math.random()*this.bodyRect.height;this.context.moveTo(d,e),this.context.lineTo(f+(d-f)/2,e+.2*Math.random()*this.bodyRect.width),this.context.lineTo(f,g),this.context.stroke()},f.prototype.renderHead=function(){this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString();var a=this.bodyRect.y-this.y;this.faceRect=new BCHWGeom.RoundedRectangle(this.bodyRect.x,this.y,this.bodyRect.width,a,a/7),this.renderRoundedRect(this.faceRect,!1,!0),this.context.fillStyle=BCHWColor.BCHWColorsLib.LIGHT_BROWN.getCanvasColorString();var b=this.faceRect.height/6.5;this.hairRect=new BCHWGeom.RoundedRectangle(this.faceRect.x,this.faceRect.y,this.faceRect.width,b,b/2.5),this.renderRoundedRect(this.hairRect);var c=new BCHWGeom.RoundedRectangle(this.hairRect.getCenterX(),this.hairRect.getBottom()-this.hairRect.radius,b,2*b,this.hairRect.radius);this.renderRoundedRect(c,!1,!0),this.context.fillStyle=BCHWColor.BCHWColorsLib.WHITE.getCanvasColorString(),this.eyeRect=new BCHWGeom.Rectangle(this.faceRect.x+this.faceRect.width/7,this.faceRect.y+.4*this.faceRect.height,.2*this.faceRect.width,this.faceRect.height/6),this.context.lineWidth=1,this.context.strokeStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString(),this.renderRect(this.eyeRect),this.context.lineWidth=0,this.context.fillStyle=BCHWColor.BCHWColorsLib.DARK_BROWN.getCanvasColorString(),this.pupilRect=new BCHWGeom.Rectangle(0,0,.6*this.eyeRect.width,this.eyeRect.height);var d=this.eyeRect.height/2,e=this.eyeRect.width/2,f=Math.random()*d*(Math.random()>.5?1:-1),g=Math.random()*e*(Math.random()>.5?1:-1),h=new BCHWGeom.Rectangle(0,0,this.pupilRect.width,this.pupilRect.height);h.x=this.eyeRect.getCenterX()-this.pupilRect.getCenterX()-g,h.y=this.eyeRect.getCenterY()-this.pupilRect.getCenterY()-f;var i=BCHWGeom.RectangleUtil.getIntersectingRectangle(this.eyeRect,h);this.renderRect(i),this.context.strokeStyle=BCHWColor.BCHWColorsLib.BLACK.getCanvasColorString(),this.context.lineWidth=Math.round(this.lineThickness/2),this.context.beginPath(),this.context.moveTo(this.eyeRect.x,this.eyeRect.y-this.eyeRect.height+.7*Math.random()*this.eyeRect.height),this.context.lineTo(this.eyeRect.getCenterX(),this.eyeRect.y-this.eyeRect.height+.7*Math.random()*this.eyeRect.height),this.context.lineTo(this.eyeRect.getRight(),this.eyeRect.y-this.eyeRect.height+.7*Math.random()*this.eyeRect.height),this.context.stroke()},f.prototype.renderMouth=function(){this.context.beginPath(),this.context.moveTo(this.faceRect.x,this.y+.8*this.faceRect.height),this.context.lineTo(this.faceRect.x+this.eyeRect.width/2,this.y+.8*this.faceRect.height),this.context.lineTo(this.faceRect.x+this.eyeRect.width,this.y+.8*this.faceRect.height+(-this.eyeRect.height/2+Math.random()*this.eyeRect.height)),this.context.stroke()},a.BCHWDad=f}(window),function(a){var b=function(a,b){LayoutRectangle.call(this,a),this.bubbleArrowHeight=b,this.lineThickness=4,this.animateTimeoutId=-1,this.padding=10,this.unitAnimator=new UnitAnimator};b.prototype=Object.create(LayoutRectangle.prototype),b.prototype.constructor=LayoutRectangle,b.OPEN_DURATION=600,b.CLOSE_DURATION=400,b.ANIMATE_INTERVAL=20,b.STAY_OPEN_INTERVAL=5e3,b.prototype.showBubble=function(a,c,d,e,f,g){this.triangleX=c,this.showCompleteCallback=e?e:null,this.startRemoveBubbleCallback=f?f:null,this.removeBubbleCompleteCallback=g?g:null,this.x=a.x-this.padding,this.y=a.y-this.padding,this.width=a.width+2*this.padding,this.height=a.height+2*this.padding;var h=18,i=9;this.cornerRadii=[];for(var j=0;4>j;j++)this.cornerRadii[j]=BCHWMathUtil.getRandomNumberInRange(i,h);var k=this;this.unitAnimator.reset(b.OPEN_DURATION,b.ANIMATE_INTERVAL,function(){k.unitAnimatorShowUpdateHandler()},function(){k.unitAnimatorShowCompleteHandler()}),this.unitAnimator.start(UnitAnimator.easeOutSine)},b.prototype.unitAnimatorShowUpdateHandler=function(){this.renderBubble(BCHWMathUtil.interpolate(this.unitAnimator.getAnimationPercent(),.4,1))},b.prototype.unitAnimatorShowCompleteHandler=function(){this.renderBubble(1),this.showCompleteCallback&&(this.showCompleteCallback(),this.showCompleteCallback=null);var a=this;this.speechBubbleTimeout=setTimeout(function(){a.removeBubble()},b.STAY_OPEN_INTERVAL)},b.prototype.removeBubble=function(){this.startRemoveBubbleCallback&&(this.startRemoveBubbleCallback(),this.startRemoveBubbleCallback=null);var a=this;this.unitAnimator.reset(b.CLOSE_DURATION,b.ANIMATE_INTERVAL,function(){a.unitAnimatorRemoveUpdateHandler()},function(){a.unitAnimatorRemoveCompleteHandler()}),this.unitAnimator.start(UnitAnimator.easeInSine)},b.prototype.unitAnimatorRemoveUpdateHandler=function(){this.renderBubble(BCHWMathUtil.interpolate(this.unitAnimator.getAnimationPercent(),1,.4))},b.prototype.unitAnimatorRemoveCompleteHandler=function(){this.clear(),this.removeBubbleCompleteCallback&&(this.removeBubbleCompleteCallback(),this.removeBubbleCompleteCallback=null)},b.prototype.renderBubble=function(a){this.clear(),this.context.fillStyle="#FFFFFF",this.context.lineWidth=0;var b=new BCHWGeom.Rectangle(this.x+1,this.y+1,(this.width-2)*a,this.height-this.bubbleArrowHeight-2);this.context.beginPath();var c=this.cornerRadii[0];this.context.moveTo(b.x,b.y+c),this.context.arc(b.x+c,b.y+c,c,Math.PI,Math.PI+BCHWMathUtil.HALF_PI),c=this.cornerRadii[1],this.context.lineTo(b.getRight()-c,b.y),this.context.arc(b.getRight()-c,b.y+c,c,Math.PI+BCHWMathUtil.HALF_PI,BCHWMathUtil.PI2),c=this.cornerRadii[2],this.context.lineTo(b.getRight(),b.getBottom()-c),this.context.arc(b.getRight()-c,b.getBottom()-c,c,0,BCHWMathUtil.HALF_PI),c=this.cornerRadii[3],this.context.lineTo(b.x+c,b.getBottom()),this.context.arc(b.x+c,b.getBottom()-c,c,BCHWMathUtil.HALF_PI,Math.PI),c=this.cornerRadii[0],this.context.lineTo(b.x,b.y+c),this.context.fill(),this.context.closePath(),1==a&&(this.context.beginPath(),this.triangleX>this.width/2?(this.context.moveTo(this.triangleX,b.getBottom()-2),this.context.lineTo(this.triangleX,this.getBottom()),this.context.lineTo(this.triangleX-this.padding-2*Math.random()*this.padding,b.getBottom()-2)):(this.context.moveTo(this.triangleX,b.getBottom()-2),this.context.lineTo(this.triangleX,this.getBottom()),this.context.lineTo(this.triangleX+this.padding+2*Math.random()*this.padding,b.getBottom()-2)),this.context.closePath(),this.context.fill())},b.prototype.stop=function(){this.clear(),this.unitAnimator.pause(),clearTimeout(this.speechBubbleTimeout)},a.BCHWSpeechBubble=b}(window),function(a){function b(){this.margin=.05,this.momProportions=new BCHWGeom.Rectangle(0,0,200,250),this.lineThickness=4,this.resizeTimeoutId=-1,this.bubbleArrowHeight=20}b.REFRESH_AFTER_RESIZE_INTERVAL=300,b.SPEECH_PAUSE_INTERVAL=400,b.MOUSEOVER_TWEET_INTERVAL=5e3,b.prototype.init=function(a,b){this.canvas=document.createElement("canvas"),this.canvasContainer=a,this.context=this.canvas.getContext("2d"),this.context.lineCap="round",this.canvasContainer.appendChild(this.canvas),this.logo=new BCHWLogo(this.canvas),this.mom=new BCHWMom(this.canvas),this.girl=new BCHWGirl(this.canvas),this.boy=new BCHWBoy(this.canvas),this.dad=new BCHWDad(this.canvas),this.render(),this.speechBubbleContainer=b,this.speechBubble=new BCHWSpeechBubble(this.canvas,this.bubbleArrowHeight),this.tweetsManager=new TweetsManager([this.mom,this.girl,this.boy,this.dad]);var c=this;this.tweetsManager.loadTweets(function(){c.tweetsLoadedHandler()}),this.blogPostsManager=new BlogPostsManager;var c=this;this.blogPostsManager.load(function(){c.blogPostsLoadedHandler()}),this.hasSpeechBubbleContent=!1},b.prototype.clearContext=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},b.prototype.resizeHandler=function(){this.clearContext(),this.speechBubbleContainer.style.opacity=0,clearTimeout(this.resizeTimeoutId),clearTimeout(this.showNextSpeechBubbleTimeoutId),this.speechBubble.stop();var a=this;this.resizeTimeoutId=setTimeout(function(){a.reset()},b.REFRESH_AFTER_RESIZE_INTERVAL)},b.prototype.reset=function(){this.render(),this.showNextSpeechBubble()},b.prototype.render=function(){this.canvas.width=this.canvasContainer.clientWidth,this.canvas.height=this.canvasContainer.clientHeight,this.clearContext();var a,b;this.canvasContainer.clientWidth>800?(this.lineThickness=4,a=4,b=4):(this.lineThickness=2,a=this.canvas.width*this.margin,b=this.canvas.height*this.margin),this.canvasContainer.clientWidth<450&&(this.lineThickness=1);
var c=new BCHWGeom.Rectangle(a,b,this.canvas.width-2*a,this.canvas.height-2*b),d=new BCHWGeom.Rectangle(0,0,800,200);BCHWGeom.RectangleUtil.scaleRectInto(c,d),BCHWGeom.RectangleUtil.verticalAlignMiddle(c,d),this.logoBounds=this.logo.getContentRect(d),this.logoBounds.height*=2;var e=this.logoBounds.height+this.logoBounds.height/8,f=e/this.momProportions.height;this.momBounds=new BCHWGeom.Rectangle(d.x,d.y,this.momProportions.width*f,e);var g=new BCHWGeom.Rectangle(0,0,this.logoBounds.width+2*this.momBounds.width,e);BCHWGeom.RectangleUtil.scaleRectInto(d,g),f=g.height/this.momProportions.height,this.momBounds.height=g.height,this.momBounds.width=this.momProportions.width*f,this.mom.render(this.momBounds,this.lineThickness),this.dadBounds=new BCHWGeom.Rectangle(d.getRight()-this.mom.width,this.mom.y,this.mom.width,this.mom.height),this.dad.render(this.dadBounds,this.lineThickness),this.logoBounds.width=g.width-2*this.mom.width-this.mom.width/4,this.logoBounds.height=g.height,this.logoBounds.x=this.mom.getRight()+this.mom.width/8,this.logoBounds.y=this.mom.getBottom()-g.height,this.logo.render(this.logoBounds,this.lineThickness);var h=this.logo.getCharacterBounds(2,0);this.girlBounds=h.clone(),this.girlBounds.width*=.9,this.girlBounds.height*=.8,BCHWGeom.RectangleUtil.horizontalAlignMiddle(h,this.girlBounds),BCHWGeom.RectangleUtil.verticalAlignBottom(h,this.girlBounds),this.girlBounds.y-=h.height+this.lineThickness,this.girl.render(this.girlBounds,this.lineThickness),h=this.logo.getCharacterBounds(2,1),this.boyBounds=h.clone(),this.boyBounds.width*=.9,this.boyBounds.height*=1.1,BCHWGeom.RectangleUtil.verticalAlignBottom(h,this.boyBounds),this.boyBounds.y-=h.height+this.lineThickness,this.boy.render(this.boyBounds,this.lineThickness)},b.prototype.renderCharacters=function(){this.mom.render(this.momBounds,this.lineThickness),this.girl.render(this.girlBounds,this.lineThickness),this.boy.render(this.boyBounds,this.lineThickness),this.dad.render(this.dadBounds,this.lineThickness)},b.prototype.showNextSpeechBubble=function(){return this.showNextSpeechBubbleTimeoutId=-1,this.blogPostsManager.rssLoaded()&&this.tweetsManager.tweetsLoaded()?(Math.random()>.7?this.showNextBlogPost():this.showNextTweet(),void 0):(this.blogPostsManager.rssLoaded()&&this.showNextBlogPost(),this.tweetsManager.tweetsLoaded()&&this.showNextTweet(),void 0)},b.prototype.showNextTweet=function(){var a=this.tweetsManager.getNextTweeter(),b=this.tweetsManager.processTweetLinks(a.tweets[a.tweetIndex].text);this.displayInSpeechBubble(a,"<p>"+b+"</p>")},b.prototype.showNextBlogPost=function(){var a=this.blogPostsManager.getNextBlogPost(),b="<p class='blogPostBubbleText'><img src='"+a.img+"' />";b+="<a href='javascript: void(0)' onclick='blogPostClickHandler(\""+a.link+"\")' >"+a.title+"</a></p>",this.displayInSpeechBubble(this.mom,b)},b.prototype.displayInSpeechBubble=function(a,b){this.context.clearRect(0,0,this.canvas.width,this.mom.y-this.lineThickness),this.speechBubbleContainer.style.opacity=0,this.speechBubbleContainer.innerHTML=b,this.speechBubbleContainer.style.maxWidth=this.logoBounds.width+this.momBounds.width/2+"px";var c,d;c=a==this.dad?this.canvasContainer.offsetLeft+this.dad.getCenterX()-this.speechBubbleContainer.clientWidth:this.canvasContainer.offsetLeft+this.mom.getCenterX();var e=this.canvasContainer.offsetTop+this.mom.y-this.speechBubbleContainer.clientHeight-this.bubbleArrowHeight-2*this.speechBubble.padding;switch(this.speechBubbleContainer.style.left=c+"px",this.speechBubbleContainer.style.top=e+"px",this.bubbleBounds=a==this.dad?new BCHWGeom.Rectangle(this.dad.getCenterX()-this.speechBubbleContainer.clientWidth,this.mom.y-this.speechBubbleContainer.clientHeight-this.bubbleArrowHeight-2*this.speechBubble.padding,this.speechBubbleContainer.clientWidth,this.speechBubbleContainer.clientHeight+this.bubbleArrowHeight):new BCHWGeom.Rectangle(this.mom.getCenterX(),this.mom.y-this.speechBubbleContainer.clientHeight-this.bubbleArrowHeight-2*this.speechBubble.padding,this.speechBubbleContainer.clientWidth,this.speechBubbleContainer.clientHeight+this.bubbleArrowHeight),a){case this.dad:d=this.dad.x+.25*this.dad.width;break;case this.boy:d=this.boy.getCenterX();break;case this.girl:d=this.girl.getCenterX();break;default:d=this.mom.x+.75*this.mom.width}this.renderCharacters();var f=this;this.speechBubble.showBubble(this.bubbleBounds,d,this.lineThickness,function(){f.showBubbleCompleteHandler()},function(){f.startHideBubbleCompleteHandler()},function(){f.hideBubbleCompleteHandler()})},b.prototype.tweetsLoadedHandler=function(){this.hasSpeechBubbleContent||this.showNextSpeechBubble(),this.hasSpeechBubbleContent=!0},b.prototype.getCurrentTweeterName=function(){return this.tweetsManager.getCurrentTweeter().name},b.prototype.blogPostsLoadedHandler=function(){this.hasSpeechBubbleContent||this.showNextSpeechBubble(),this.hasSpeechBubbleContent=!0},b.prototype.showBubbleCompleteHandler=function(){this.speechBubbleContainer.style.opacity=1},b.prototype.startHideBubbleCompleteHandler=function(){this.speechBubbleContainer.style.opacity=0},b.prototype.hideBubbleCompleteHandler=function(){var a=this;this.showNextSpeechBubbleTimeoutId=setTimeout(function(){a.showNextSpeechBubble()},b.SPEECH_PAUSE_INTERVAL)},b.prototype.speechBubbleContainerMouseOverHandler=function(){},a.BCHWMain=b}(window);