(function(b){function a(){}a.prototype.load=function(d){this.request=null;var e=this;this.request=new XMLHttpRequest();this.request.onreadystatechange=function(){e.blogPostsLoadedHandler()};this.request.open("GET","http://www.bigcityhousewife.net/php/getBlogPosts.php",true);this.request.send(null);this.blogPostsLoadedCallBack=d?d:null;this.currentPostIndex=0};a.prototype.getValueFromTagName=function(d,e){var f=d.getElementsByTagName(e);return f[0].firstChild.nodeValue};a.regExpUrlContainingSize=/-\d+x\d+\.(jpg|png|gif)$/;a.regExpUrlWithoutSize=/\.(jpg|png|gif)$/;a.prototype.setWordPressImageSize=function(d){d=d.replace(a.regExpUrlContainingSize,"-150x150.$1");if(d.indexOf("150x150")==-1){d=d.replace(a.regExpUrlWithoutSize,"-150x150.$1")}return d};a.prototype.blogPostsLoadedHandler=function(){if(this.request.readyState==4&&this.request.status==200){var d=new DOMParser();var m=d.parseFromString(this.request.responseText,"text/xml");var j=m.getElementsByTagName("item");this.posts=[];var g,l,k,h,e,f;for(g=0;g<j.length;++g){l=this.getValueFromTagName(j[g],"title");k=this.getValueFromTagName(j[g],"link");h=j[g].getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/","encoded")[0].firstChild.nodeValue;if(h&&h.indexOf('src="'>-1)){e=h.split('src="');f=e[1].split('"')[0];f=this.setWordPressImageSize(f);this.posts.push(new c(l,k,f))}this.posts=BCHWArrayUtil.shuffle(this.posts)}this.request.onreadystatechange=null;if(this.blogPostsLoadedCallBack){this.blogPostsLoadedCallBack();this.blogPostsLoadedCallBack=null}}};a.prototype.rssLoaded=function(){return this.posts&&this.posts.length>0};a.prototype.getNextBlogPost=function(){this.currentPostIndex++;this.currentPostIndex%=this.posts.length;return this.posts[this.currentPostIndex]};b.BlogPostsManager=a;function c(f,e,d){this.title=f;this.link=e;this.img=d}b.BlogPost=c}(window));